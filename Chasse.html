<!doctype html>
<html lang='fr'>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- IMPORT FONT AWESOME POUR LES IC√îNES -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    
    <title>Le tr√©sor de Colomiers - √âtapes 1-15</title>
    
    <style>
        /* --- DESIGN G√âN√âRAL (IDENTIQUE) --- */
        body {
            font-family: 'Verdana', sans-serif;
            background-color: #f0f2f5;
            margin: 0;
            padding: 0;
            color: #333;
        }

        .container {
            max-width: 600px;
            margin: 0 auto;
            background-color: white;
            min-height: 100vh;
            padding: 20px;
            box-shadow: 0 0 15px rgba(0,0,0,0.1);
            padding-bottom: 40px;
        }

        /* Titre H1 supprim√© des sections, H2 devient le titre de l'√©tape */
        h2 {
            font-size: 20px;
            color: #2980b9;
            margin-top: 40px;
            margin-bottom: 15px;
            border-left: 5px solid #2980b9;
            padding-left: 10px;
        }
        
        /* --- NOUVEAU : CADRE D'INFORMATION (HEADER) --- */
        @import url('https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&display=swap');
        
        .info-box-header {
            background-color: #fdfdfa;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            padding: 15px 20px;
            margin: 20px auto 0;
            max-width: 600px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        .info-box-header .main-title {
            font-family: 'Dancing Script', 'Brush Script MT', 'cursive';
            font-size: 36px;
            color: #d35400;
            margin-top: 0;
            margin-bottom: 15px;
            text-align: center;
        }
        .info-box-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 15px;
        }
        .info-col-left img {
            width: 130px;
            height: 100px;
            object-fit: cover;
            border-radius: 8px;
            border: 2px solid #ccc;
        }
        .info-col-middle {
            text-align: center;
            flex-grow: 1;
        }
        .info-col-middle .distance {
            font-size: 20px;
            font-weight: bold;
            color: #333;
            margin-bottom: 12px;
        }
        .info-icons {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 8px; /* Resserr√© */
        }
        .info-icon {
            font-size: 20px; /* Taille de l'√©moji */
            cursor: help;
            background-color: #333; /* Fond noir */
            color: #fff; /* Symbole blanc */
            width: 32px; /* Carr√© */
            height: 32px; /* Carr√© */
            display: inline-flex;
            align-items: center;
            justify-content: center;
            border-radius: 4px; /* Coins l√©g√®rement arrondis */
            line-height: 1;
        }
        .info-col-right {
            text-align: right;
            font-size: 14px;
            line-height: 1.6;
            font-weight: 500;
            min-width: 90px;
            white-space: nowrap; /* Emp√™che le saut de ligne */
        }
        .info-col-right strong {
            color: #000;
        }
        
        /* --- NOUVEAU : INFO PARKING --- */
        .parking-info {
            max-width: 600px;
            margin: 20px auto;
            text-align: center;
            padding: 15px 20px;
            background-color: #f8f9fa;
            border-radius: 8px;
            font-size: 14px;
        }
        .parking-info p {
            margin-top: 0;
            margin-bottom: 15px;
            line-height: 1.5;
        }
        .parking-info h3 {
            margin-top: 0;
            margin-bottom: 10px;
            color: #333;
            font-size: 16px;
        }
        .parking-info ul {
            list-style-type: none;
            padding: 0;
            margin: 0;
        }
        .parking-info ul li {
            margin: 5px 0;
        }
        .parking-info ul li a {
            color: #2980b9;
            font-weight: bold;
            text-decoration: none;
            font-family: 'Courier New', monospace;
            font-size: 1.1em;
        }

        /* --- STYLE : PR√âSENTATION DES PERSONNAGES (√âtape 1) --- */
        .character-presentation {
            text-align: center;
            margin-bottom: 30px;
            padding: 15px 0;
            border-bottom: 2px solid #eee;
        }
        .character-presentation p { font-size: 1.1em; color: #666; margin: 0 0 15px 0; font-weight: bold; }
        .character-group { display: flex; justify-content: space-around; align-items: flex-start; flex-wrap: wrap; }
        .character-item { display: flex; flex-direction: column; align-items: center; margin: 10px 5px; flex-basis: 30%; }
        .character-icons { display: flex; margin-bottom: 5px; }
        .badge-icon { width: 91px; height: 91px; border-radius: 50%; object-fit: cover; border: 3px solid #d35400; margin: 0 3px; }
        .character-label { font-size: 0.85em; color: #d35400; font-weight: bold; margin-top: 5px; }
        
        /* --- STYLE DES DIALOGUES (IDENTIQUE) --- */
        .dialogue-row { display: flex; align-items: flex-start; margin-bottom: 15px; }
        .avatar { width: 50px; height: 50px; border-radius: 50%; object-fit: cover; border: 2px solid #ccc; flex-shrink: 0; margin-right: 15px; }
        img[alt="Didier"] { border: 2px solid #2ecc71; }
        .bubble { background-color: #e9eff5; padding: 12px 15px; border-radius: 0 15px 15px 15px; position: relative; font-size: 15px; line-height: 1.4; }
        .bubble::before { content: ""; position: absolute; top: 0; left: -10px; width: 0; height: 0; border-top: 10px solid #e9eff5; border-left: 10px solid transparent; }
        .name-tag { font-size: 11px; font-weight: bold; color: #666; margin-bottom: 4px; display: block; text-transform: uppercase; }

        /* --- COORDONN√âES GPS --- */
        .gps-box { text-align: center; margin: 20px 0; padding: 15px; background-color: #fff3cd; border-radius: 8px; border: 1px solid #ffeeba; }
        .gps-link { display: inline-block; margin-top: 5px; color: #856404; font-weight: bold; text-decoration: none; border-bottom: 2px dotted #856404; font-family: 'Courier New', monospace; font-size: 1.1em; }
        .gps-link:hover { background-color: #856404; color: white; }

        /* --- ENCART "MISSION" (ORANGE - A √† N) --- */
        .mission-box { border: 3px dashed #d35400; background-color: #fffaf0; padding: 20px; margin: 30px 0; text-align: left; font-size: 15px; border-radius: 10px; color: #333; }
        
        /* --- ENCART "MISSION" (VERT - Etape 15) --- */
        #etape15 .mission-box { border: 3px dashed #2ecc71; background-color: #f6fff6; }
        #etape15 .mission-box h3 { color: #2ecc71; margin-top: 0; border-bottom: 1px solid #ddd; padding-bottom: 5px; margin-bottom: 15px; }
        
        /* Zone de saisie du r√©sultat (Style unifi√©) */
        .answer-input-zone { display: flex; align-items: center; justify-content: center; margin: 15px 0 5px 0; padding: 10px; border: 1px solid #ccc; border-radius: 5px; background-color: #f8f9fa; }
        .answer-input-zone label { font-weight: bold; margin-right: 10px; color: #d35400; }
        #A-label, #B-label, #C-label, #D-label, #E-label, #F-label { color: #333; }
        .answer-input-zone input { width: 50px; padding: 8px; border: 1px solid #ccc; border-radius: 4px; text-align: center; font-size: 18px; font-weight: bold; }
        
        /* Boutons de validation (Sp√©cifiques A-J) */
        #validate-button-A, #validate-button-B, #validate-button-C,
        #validate-button-D, #validate-button-E, #validate-button-F,
        #validate-button-G, #validate-button-H, #validate-button-I,
        #validate-button-J {
            display: block; width: 100%; padding: 12px; margin-top: 15px; border: none; border-radius: 5px;
            font-weight: bold; font-size: 16px; cursor: pointer; transition: background-color 0.2s, color 0.2s;
        }
        
        /* Bouton de validation (G√©n√©rique L, M, N) */
        /* Etape 13 et 14 utilisent un ID unique pour le bouton */
        #validate-button-M, #validate-button-N {
            display: block; width: 100%; padding: 12px; margin-top: 15px; border: none; border-radius: 5px;
            font-weight: bold; font-size: 16px; cursor: pointer; transition: background-color 0.2s, color 0.2s;
        }

        /* Styles du bouton (Unifi√©s) */
        .btn-default { background-color: #bdc3c7; color: #34495e; }
        .btn-validated { background-color: #e67e22; color: white; }
        .btn-default:hover { background-color: #ccd1d1; }

        /* Messages de validation (Sp√©cifiques A-J) */
        #validation-message-A, #validation-message-B, #validation-message-C,
        #validation-message-D, #validation-message-E, #validation-message-F,
        #validation-message-G, #validation-message-H, #validation-message-I,
        #validation-message-J {
            margin-top: 5px; font-size: 14px; font-weight: bold; color: #e74c3c; min-height: 20px; text-align: center;
        }

        /* Message de validation (G√©n√©rique L, M, N) */
        #validation-message-L, #validation-message-M, #validation-message-N {
            margin-top: 5px; font-size: 14px; font-weight: bold; color: #e74c3c; min-height: 20px; text-align: center;
        }

        /* --- ENCART "DIRECTION" (GRIS/NEUTRE) --- */
        .direction-box { background-color: #f8f9fa; border-left: 6px solid #95a5a6; padding: 15px 20px; margin-top: 40px; color: #555; font-style: italic; font-size: 15px; }
        .direction-box strong { color: #333; font-weight: bold; font-style: normal; }
        .direction-box .path-option { margin-top: 10px; }
        .direction-box .path-link { color: #2980b9; text-decoration: none; border-bottom: 1px dotted #2980b9; }
        
        /* Petite classe pour les descriptions narratives (actions, sons) */
        .narrative-note { text-align: center; font-style: italic; color: #888; font-size: 13px; margin: 15px 0; }

        /* --- IMAGE D'ILLUSTRATION (Sp√©cifique aux √©tapes 2, 6, 7, 8) --- */
        .illustration-grande { max-width: 100%; height: auto; border-radius: 8px; margin: 20px 0; box-shadow: 0 4px 8px rgba(0,0,0,0.1); display: block; }
        .image-link { display: block; text-align: center; margin: 20px 0; }
        
        /* --- Styles sp√©cifiques (Etape 10, 11, 13) --- */
        .stacked-avatars-visible { position: relative; width: 80px; height: 50px; flex-shrink: 0; margin-right: 15px; }
        .stacked-avatars-visible .avatar-left { position: absolute; top: 0; left: 0; z-index: 2; width: 50px; height: 50px; border-radius: 50%; object-fit: cover; border: 2px solid #ccc; }
        .stacked-avatars-visible .avatar-right { position: absolute; top: 0; left: 30px; z-index: 1; width: 50px; height: 50px; border-radius: 50%; object-fit: cover; border: 2px solid #ccc; }

        /* Styles pour les options √† choix multiple (Etape 11) */
        .mission-options { margin-top: 15px; font-weight: normal; }
        .mission-options label { display: block; margin: 5px 0; font-weight: normal; cursor: pointer; }
        .mission-options input[type="radio"] { margin-right: 8px; }
        #validation-message-K { margin-top: 10px; font-size: 14px; font-weight: bold; color: #2ecc71; min-height: 20px; text-align: center; }
        #validation-message-K.error { color: #e74c3c; }
        
        /* --- STYLES ETAPE 15 --- */
        #variable-list { display: grid; grid-template-columns: repeat(auto-fit, minmax(130px, 1fr)); gap: 10px; margin-bottom: 20px; }
        .variable-item { display: flex; flex-direction: column; align-items: center; padding: 8px 10px; background-color: #eee; border-radius: 5px; font-weight: bold; text-align: center; box-shadow: 0 1px 3px rgba(0,0,0,0.1); }
        .variable-reminder { font-size: 11px; color: #666; margin-bottom: 5px; font-weight: normal; text-transform: uppercase; letter-spacing: 0.5px; width: 100%; border-bottom: 1px dotted #ccc; padding-bottom: 3px; min-height: 15px; }
        .variable-input-row { display: flex; align-items: center; justify-content: center; width: 100%; margin-top: 5px; }
        .variable-item input { width: 45px; padding: 4px; text-align: center; font-weight: bold; border: 1px solid #ccc; border-radius: 3px; margin-left: 5px; }
        
        .status-dot { height: 10px; width: 10px; border-radius: 50%; display: inline-block; margin-right: 5px; }
        .dot-green { background-color: #2ecc71; }
        .dot-red { background-color: #e74c3c; }
        .legend p { margin: 5px 0; font-size: 14px; }

        .final-formula-display { font-family: 'Courier New', monospace; font-size: 20px; font-weight: bold; text-align: center; background-color: #fff; border: 2px solid #2ecc71; padding: 15px; border-radius: 8px; margin-bottom: 20px; line-height: 1.5; overflow-x: auto; color: #34495e; white-space: nowrap; }
        
        .final-check-zone { display: flex; flex-direction: column; align-items: center; padding: 15px; border: 1px solid #ccc; border-radius: 5px; background-color: #f8f9fa; }
        .final-check-zone button { margin-top: 15px; padding: 12px 25px; background-color: #d35400; color: white; border: none; border-radius: 5px; cursor: pointer; font-size: 18px; font-weight: bold; box-shadow: 0 4px #a04000; transition: all 0.1s; }
        .final-check-zone button:active { box-shadow: 0 1px #a04000; transform: translateY(3px); }
        #result-message { margin-top: 15px; font-weight: bold; min-height: 20px; text-align: center; padding: 10px; border-radius: 5px; }
        #final-link-box { margin-top: 15px; display: none; text-align: center; padding: 15px; background-color: #e8f5e9; border: 1px solid #2ecc71; border-radius: 8px; }
        
        /* Message d'avertissement pour l'Etape 15 */
        #warning-etape15 {
            max-width: 600px;
            margin: 20px auto;
            padding: 20px; 
            text-align: center; 
            background-color: #fff3cd; 
            border: 1px solid #ffeeba; 
            border-radius: 8px; 
            color: #856404;
        }
        #warning-etape15 h2 { color: #856404; border-left: none; padding-left: 0; margin-top: 0; }

    </style>
</head>
<body>

<div class="info-box-header">
    <h1 class="main-title">Le tr√©sor de Colomiers</h1>
    <div class="info-box-content">
        <div class="info-col-left">
            <img src="Colomiers.jpg" alt="Image de Colomiers">
        </div>
        <div class="info-col-middle">
            <div class="distance">3 km 60-90mn</div>
            <div class="info-icons">
                <span class="info-icon" title="Faisable √† pied">üö∂</span>
                <span class="info-icon" title="Faisable en v√©lo"> <i class="fas fa-bicycle"></i> </span>
                <span class="info-icon" title="Faisable en poussette"> <i class="fas fa-baby-carriage"></i> </span> <span class="info-icon" title="Animaux de compagnie autoris√©s">üê∂</span>
                <span class="info-icon" title="Pr√©vu pour les enfants">üë™</span> <span class="info-icon" title="Accessible 24/7">üè™</span>
                <span class="info-icon" title="Eau potable √† proximit√©">üíß</span>
            </div>
        </div>
        <div class="info-col-right">
            <strong>Difficult√© :</strong> 2 / 5<br>
            <strong>Terrain :</strong> 1.5 / 5
        </div>
    </div>
</div>

<div class="parking-info">
    <p>Le stationnement est gratuit sur l‚Äôint√©gralit√© de la ville de Colomiers. N‚Äôh√©sitez pas √† vous garer aux alentours si les parking sont pleins.</p>
    <h3>Parkings √† proximit√© :</h3>
    <ul>
        <li><a href="https://www.google.com/maps/search/?api=1&query=43.613383,1.337067" target="_blank">N 43¬∞ 36.803' E 001¬∞ 20.224'</a></li>
        <li><a href="https://www.google.com/maps/search/?api=1&query=43.614267,1.337667" target="_blank">N 43¬∞ 36.856' E 001¬∞ 20.260'</a></li>
        <li><a href="https://www.google.com/maps/search/?api=1&query=43.613783,1.336983" target="_blank">N 43¬∞ 36.827' E 001¬∞ 20.219'</a></li>
    </ul>
</div>

<section id="etape1" class="etape">
<div class="container">
    
    <div class="character-presentation">
        <p>Une aventure de :</p>
        <div class="character-group">
            <div class="character-item">
                <div class="character-icons"> <img src="Badge Loumpour.png" alt="Loumpour" class="badge-icon"> </div>
                <span class="character-label">La koala</span>
            </div>
            <div class="character-item">
                <div class="character-icons"> <img src="Badge Bernard.png" alt="Bernard" class="badge-icon"> <img src="Badge Serge.png" alt="Serge" class="badge-icon"> </div>
                <span class="character-label">Les lamas jumeaux</span>
            </div>
            <div class="character-item">
                <div class="character-icons"> <img src="Badge Didier.png" alt="Didier" class="badge-icon"> </div>
                <span class="character-label">Le bourdon</span>
            </div>
        </div>
    </div>
    
    <div class="dialogue-row"> <img src="Bernard.jpg" alt="Bernard" class="avatar"> <div class="bubble"> <span class="name-tag">Bernard</span> Mais qu‚Äôest-ce qu‚Äôelle fait ?! </div> </div>
    <div class="dialogue-row"> <img src="Serge.jpg" alt="Serge" class="avatar"> <div class="bubble"> <span class="name-tag">Serge</span> Tu lui as bien dit pour le tr√©sor ? </div> </div>
    <div class="dialogue-row"> <img src="Bernard.jpg" alt="Bernard" class="avatar"> <div class="bubble"> <span class="name-tag">Bernard</span> Mais bien s√ªr !! </div> </div>
    <div class="dialogue-row"> <img src="Serge.jpg" alt="Serge" class="avatar"> <div class="bubble"> <span class="name-tag">Serge</span> Ah ! La voil√†. </div> </div>

    <h2>1. Point de d√©part : la porte du ch√¢teau des Raspaud</h2>

    <div class="gps-box">
        üìç Cliquez pour y aller :<br>
        <a href="https://www.google.com/maps/search/?api=1&query=43.614483,1.3377" target="_blank" class="gps-link">
            N 43¬∞ 36.869' E 001¬∞ 20.262'
        </a>
    </div>

    <div class="dialogue-row"> <img src="Loumpour.jpg" alt="Loumpour" class="avatar"> <div class="bubble"> <span class="name-tag">Loumpour</span> Salut les jumeaux ! Bon, c‚Äôest quoi cette histoire de tr√©sor ? </div> </div>
    <div class="dialogue-row"> <img src="Bernard.jpg" alt="Bernard" class="avatar"> <div class="bubble"> <span class="name-tag">Bernard</span> C‚Äôest Didier qui nous a pr√©venus. Il a dit qu‚Äôil avait trouv√© le tr√©sor qui avait fait la richesse de Colomiers depuis des si√®cles. On va √™tre riche nous aussi ! </div> </div>
    <div class="dialogue-row"> <img src="Loumpour.jpg" alt="Loumpour" class="avatar"> <div class="bubble"> <span class="name-tag">Loumpour</span> Et il est o√π Didier ? </div> </div>
    <div class="dialogue-row"> <img src="Serge.jpg" alt="Serge" class="avatar"> <div class="bubble"> <span class="name-tag">Serge</span> On sait pas ! Il est pas encore arriv√©. Il nous a donn√© rendez-vous dans les parages. </div> </div>
    <div class="dialogue-row"> <img src="Bernard.jpg" alt="Bernard" class="avatar"> <div class="bubble"> <span class="name-tag">Bernard</span> Il devrait pas tarder. On a qu‚Äô√† commencer sans lui ! </div> </div>
    <div class="dialogue-row"> <img src="Loumpour.jpg" alt="Loumpour" class="avatar"> <div class="bubble"> <span class="name-tag">Loumpour</span> Ok, mais on commence par quoi ? </div> </div>
    <div class="dialogue-row"> <img src="Serge.jpg" alt="Serge" class="avatar"> <div class="bubble"> <span class="name-tag">Serge</span> Ben, par lire le panneau, non ? </div> </div>

    <div class="mission-box">
        Sur le panneau √† droite de la porte vous trouverez la r√©ponse √† cette question : combien le ch√¢teau comptait-il de tours √† encorbellement avant sa destruction ? Notez ce chiffre qui vaut A. 
        <div class="answer-input-zone"> <label for="A" id="A-label">A =</label> <input type="number" id="A" min="0" max="99" required oninput="resetStandardInput('A')"> </div>
        <div id="validation-message-A"></div>
        <button id="validate-button-A" class="btn-default" onclick="handleStandardValidation('A')"> Valider la r√©ponse </button>
    </div>

    <div class="dialogue-row"> <img src="Loumpour.jpg" alt="Loumpour" class="avatar"> <div class="bubble"> <span class="name-tag">Loumpour</span> Le panneau parle d'un tunnel secret : Vous avez raisons les lamas, je commence √† croire que Didier ne nous a pas menti‚Ä¶ Simplement maintenant que le ch√¢teau est d√©truit, cela ne nous avance pas √† grand-chose. </div> </div>
    <div class="dialogue-row"> <img src="Bernard.jpg" alt="Bernard" class="avatar"> <div class="bubble"> <span class="name-tag">Bernard</span> Le panneau dit qu‚Äôil y a un autre tunnel du c√¥t√© de l‚Äô√©glise, c‚Äôest peut-√™tre l√†-bas qu‚Äôest enterr√© le tr√©sor ? </div> </div>
    <div class="dialogue-row"> <img src="Serge.jpg" alt="Serge" class="avatar"> <div class="bubble"> <span class="name-tag">Serge</span> De toute fa√ßon on n‚Äôa pas d‚Äôautres pistes. Direction l‚Äô√©glise ! </div> </div>
    <div class="direction-box"> Descendez √† pr√©sent la rue du Couderc sur une centaine de m√®tres en direction de la place Firmin Pons. </div>
</div>
</section>
<section id="etape2" class="etape">
<div class="container">
    <h2>2. Place Firmin Pons, terminus, tout le monde descend !</h2>
    <div class="gps-box">
        üìç Cliquez pour y aller :<br>
        <a href="https://www.google.com/maps/search/?api=1&query=43.613556,1.337111" target="_blank" class="gps-link">
            N 43¬∞ 36.813' E 001¬∞ 20.227'
        </a>
    </div>

    <div class="dialogue-row"> <img src="Bernard.jpg" alt="Bernard" class="avatar"> <div class="bubble"> <span class="name-tag">Bernard</span> Tiens regarde cette place Serge, elle te dit rien ? </div> </div>
    <div class="dialogue-row"> <img src="Serge.jpg" alt="Serge" class="avatar"> <div class="bubble"> <span class="name-tag">Serge</span> Ben non, une place √ßa parle pas ! </div> </div>
    <div class="dialogue-row"> <img src="Bernard.jpg" alt="Bernard" class="avatar"> <div class="bubble"> <span class="name-tag">Bernard</span> Idiot ! On a vu une photo dans notre vieux livre d‚Äôhistoire de Colomiers. C‚Äôest de l√† que partait le tramway il y a plus de cent ans. </div> </div>
    <div class="dialogue-row"> <img src="Serge.jpg" alt="Serge" class="avatar"> <div class="bubble"> <span class="name-tag">Serge</span> Ah, oui ! C‚Äôest vrai. Firmin Pons, surnomm√© ¬´ l‚Äôempereur Pons ¬ª, il √©tait consid√©r√© comme le cr√©ateur des transports en communs toulousains. </div> </div>
    <div class="dialogue-row"> <img src="Bernard.jpg" alt="Bernard" class="avatar"> <div class="bubble"> <span class="name-tag">Bernard</span> Sur la photo il y avait plein de boutiques sur cette place. C‚Äô√©tait le premier centre ville de Colomiers qui reliait depuis la R√©volution les trois rues principales de Colomiers : la rue du Prat, la rue du Couderc et la rue de l‚Äô√©glise. </div> </div>
    <a href="Pons.jpg" target="_blank" class="image-link"> <img src="Pons.jpg" alt="Place Firmin Pons ancienne" class="illustration-grande"> </a>
    <div class="dialogue-row"> <img src="Loumpour.jpg" alt="Loumpour" class="avatar"> <div class="bubble"> <span class="name-tag">Loumpour</span> Ben dis donc les frangins, vous avez boss√© avant de venir. </div> </div>
    <div class="dialogue-row"> <img src="Serge.jpg" alt="Serge" class="avatar"> <div class="bubble"> <span class="name-tag">Serge</span> Boss√© ?? Tu nous as pris pour des dromadaires ?? </div> </div>

    <div class="mission-box">
        Beaucoup de maisons d‚Äô√©poques ont disparu en un si√®cle, certaines effondr√©es, d‚Äôautres d√©truites. Pour autant il reste quelques vieilles toulousaines. Aux num√©ros 6 √† 8 de la place se trouvent deux maisons avec des ouvertures en losanges juste au-dessous du toit. Combien de ces losanges comptez-vous en additionnant ceux des deux maisons ?
        <div class="answer-input-zone"> <label for="B" id="B-label">B =</label> <input type="number" id="B" min="0" max="99" required oninput="resetStandardInput('B')"> </div>
        <div id="validation-message-B"></div>
        <button id="validate-button-B" class="btn-default" onclick="handleStandardValidation('B')"> Valider la r√©ponse </button>
    </div>

    <div class="dialogue-row"> <img src="Loumpour.jpg" alt="Loumpour" class="avatar"> <div class="bubble"> <span class="name-tag">Loumpour</span> Bon allez, faut pas qu‚Äôon traine plus longtemps, direction l‚Äô√©glise. </div> </div>
    <div class="direction-box"> Remontez la rue de l'√©glise sur 100m en passant par la passerelle. Profitez-en pour jeter un oeil √† votre gauche sur le rond-point "Flandres-Dunkerke" dont nous reparlerons ult√©rieurement. </div>
</div>
</section>
<section id="etape3" class="etape">
<div class="container">
    <h2>3. Les reliques de Sainte Radegonde</h2>
    <div class="gps-box">
        üìç Cliquez pour y aller :<br>
        <a href="https://www.google.com/maps/search/?api=1&query=43.612810,1.339280" target="_blank" class="gps-link">
            N 43¬∞ 36.769' E 001¬∞ 20.357'
        </a>
    </div>

    <div class="dialogue-row"> <img src="Loumpour.jpg" alt="Loumpour" class="avatar"> <div class="bubble"> <span class="name-tag">Loumpour</span> Radegonde‚Ä¶ jamais entendu ce nom-l√†. Ca vient d‚Äôo√π d‚Äôapr√®s vous ? </div> </div>
    <div class="dialogue-row"> <img src="Serge.jpg" alt="Serge" class="avatar"> <div class="bubble"> <span class="name-tag">Serge</span> Poitiers ! Sainte Radegonde a √©t√© Reine des Francs au VI√®me si√®cle. Femme de Clotaire, un des fils de Clovis, elle a toujours refus√© le faste de la Cour, refusant de porter de riches habits et pratiquant le je√ªne √† la table royale pour faire exemple d‚Äôhumilit√©. Apr√®s que Clotaire eut assassin√© son fr√®re, elle d√©cida de fuir ce meurtrier et se fit moniale pour qu‚Äôil n‚Äôait plus de pouvoir sur elle. Elle fondera par la suite l‚ÄôAbbaye de Poitiers. </div> </div>
    <div class="dialogue-row"> <img src="Loumpour.jpg" alt="Loumpour" class="avatar"> <div class="bubble"> <span class="name-tag">Loumpour</span> T‚Äôas appris tout √ßa avant de venir √† Colomiers ? </div> </div>
    <div class="dialogue-row"> <img src="Serge.jpg" alt="Serge" class="avatar"> <div class="bubble"> <span class="name-tag">Serge</span> Non, mais j‚Äôai internet sur mon t√©l√©phone. </div> </div>
    <div class="dialogue-row"> <img src="Loumpour.jpg" alt="Loumpour" class="avatar"> <div class="bubble"> <span class="name-tag">Loumpour</span> OK, mais alors qu‚Äôest-ce qu‚Äôelle a √† voir avec Colomiers ? </div> </div>
    <div class="dialogue-row"> <img src="Bernard.jpg" alt="Bernard" class="avatar"> <div class="bubble"> <span class="name-tag">Bernard</span> Ses reliques auraient √©t√© apport√©es √† Colomiers par Alphonse de Poitiers, comte de Toulouse. Une phalange et trois os du poignet. </div> </div>
    <div class="dialogue-row"> <img src="Loumpour.jpg" alt="Loumpour" class="avatar"> <div class="bubble"> <span class="name-tag">Loumpour</span> Ah, toi aussi t‚Äôas la 5G. </div> </div>
    <div class="dialogue-row"> <img src="Bernard.jpg" alt="Bernard" class="avatar"> <div class="bubble"> <span class="name-tag">Bernard</span> Nope, moi j‚Äôai lu le panneau qui √©tait sur la porte‚Ä¶ </div> </div>

    <div class="mission-box">
        Sur le panneau qui se trouve √† droite de la porte de l‚Äô√©glise, il est √©crit que ¬´ _83 citoyens actifs de la commune ont √©t√© convoqu√©s le 7 f√©vrier 1790 ¬ª. Relevez le chiffre des centaines qui vaut C.
        <div class="answer-input-zone"> <label for="C" id="C-label">C =</label> <input type="number" id="C" min="0" max="99" required oninput="resetStandardInput('C')"> </div>
        <div id="validation-message-C"></div>
        <button id="validate-button-C" class="btn-default" onclick="handleStandardValidation('C')"> Valider la r√©ponse </button>
    </div>

    <div class="dialogue-row"> <img src="Loumpour.jpg" alt="Loumpour" class="avatar"> <div class="bubble"> <span class="name-tag">Loumpour</span> Bon, ok. Les gens venaient s√ªrement √† Colomiers pour les reliques, mais √ßa peut pas √™tre √ßa le ¬´ tr√©sor ¬ª qui va nous rendre riches. Il a rien dit d‚Äôautre sur le tr√©sor Didier ? </div> </div>
    <div class="dialogue-row"> <img src="Bernard.jpg" alt="Bernard" class="avatar"> <div class="bubble"> <span class="name-tag">Bernard</span> Ben il a dit que c‚Äô√©tait il y a tr√®s longtemps, et il avait l‚Äôair de dire que c‚Äô√©tait un truc assez commun. Pas une phalange ou trois os du poignet d‚Äôune Sainte, √ßa c‚Äôest s√ªr. </div> </div>
    <div class="dialogue-row"> <img src="Loumpour.jpg" alt="Loumpour" class="avatar"> <div class="bubble"> <span class="name-tag">Loumpour</span> Et alors on fait quoi, l√† ? </div> </div>
    <div class="dialogue-row"> <img src="Serge.jpg" alt="Serge" class="avatar"> <div class="bubble"> <span class="name-tag">Serge</span> On fait koala ? Ben t‚Äôes la mieux plac√©e pour nous le dire. </div> </div>
    <div class="narrative-note"> [Serge et Bernard rient comme des idiots] </div>
    <div class="dialogue-row"> <img src="Loumpour.jpg" alt="Loumpour" class="avatar"> <div class="bubble"> <span class="name-tag">Loumpour</span> Vous √™tes b√™tes ! R√©fl√©chissons, y avait quoi y a‚Ä¶ je sais pas moi‚Ä¶ cent ans ? </div> </div>
    <div class="dialogue-row"> <img src="Serge.jpg" alt="Serge" class="avatar"> <div class="bubble"> <span class="name-tag">Serge</span> <i>(grave)</i> La guerre. </div> </div>
    <div class="dialogue-row"> <img src="Loumpour.jpg" alt="Loumpour" class="avatar"> <div class="bubble"> <span class="name-tag">Loumpour</span> mmm‚Ä¶ la guerre. Ca peut pas √™tre √ßa le tr√©sor. Mais on est √† c√¥t√© du Monument aux Morts, allons voir √ßa nous donnera peut-√™tre des id√©es. </div> </div>
    <div class="direction-box"> Dirigez vous vers la droite de l'√©glise pour aller jusqu'au Monument aux morts. </div>
</div>
</section>
<section id="etape4" class="etape">
<div class="container">
    <h2>4. Le Monument aux Morts</h2>
    <div class="gps-box">
        üìç Cliquez pour y aller :<br>
        <a href="https://www.google.com/maps/search/?api=1&query=43.612380,1.339374" target="_blank" class="gps-link">
            N 43¬∞ 36.743' E 001¬∞ 20.362'
        </a>
    </div>

    <div class="dialogue-row"> <img src="Loumpour.jpg" alt="Loumpour" class="avatar"> <div class="bubble"> <span class="name-tag">Loumpour</span> On dirait que c‚Äôest tout neuf ! </div> </div>
    <div class="dialogue-row"> <img src="Bernard.jpg" alt="Bernard" class="avatar"> <div class="bubble"> <span class="name-tag">Bernard</span> Yep ! Ils disent sur le site de la mairie que √ßa a √©t√© inaugur√© le 8 mai 2025. Avant il y avait deux Monuments aux Morts : un pour la guerre 1914-1918, et un autre √† l‚Äôancien cimeti√®re pour les autres guerres. Les √©l√©ments en m√©tal du premier Monument ont √©t√© ajout√©s sur le marbre rose du deuxi√®me Monument. Impressionnant, on croirait presque qu‚Äôil a √©t√© con√ßu comme √ßa. </div> </div>
    <div class="dialogue-row"> <img src="Serge.jpg" alt="Serge" class="avatar"> <div class="bubble"> <span class="name-tag">Serge</span> Tiens, tous ces noms √ßa me rappelle un truc que j‚Äôai lu sur la ville. Il para√Æt que jusqu‚Äôen 1936, la ville de Colomiers n‚Äôa jamais compt√© plus de 1.900 habitants. En revanche en moins de 100 ans la population a √©t√© multipli√©e par 20, puisque Colomiers compte aujourd‚Äôhui plus de 41.000 habitants. A voir la proportion de colum√©rins morts lors de la premi√®re guerre mondiale, on aurait pu croire le contraire. </div> </div>

    <div class="mission-box">
        Sur le Monument aux Morts, combien de fois le pr√©nom ¬´ Jean ¬ª apparait-il ? Faites bien le tour sur les trois faces et ne tenez compte ni des doubles pr√©noms, ni des pr√©noms compos√©s. C‚Äôest un chiffre impair. Notez ce nombre qui vaut D.
        <div class="answer-input-zone"> <label for="D" id="D-label">D =</label> <input type="number" id="D" min="0" max="99" required oninput="resetStandardInput('D')"> </div>
        <div id="validation-message-D"></div>
        <button id="validate-button-D" class="btn-default" onclick="handleStandardValidation('D')"> Valider la r√©ponse </button>
    </div>

    <div class="dialogue-row"> <img src="Loumpour.jpg" alt="Loumpour" class="avatar"> <div class="bubble"> <span class="name-tag">Loumpour</span> Tr√®s √©mouvant. Mais on n‚Äôest pas plus avanc√©s dans notre qu√™te. Eh ! regardez cette porte en brique l√†-bas, on dirait la m√™me que celle du ch√¢teau. Vous croyez que c‚Äôest la sortie du souterrain ? </div> </div>
    <div class="dialogue-row"> <img src="Bernard.jpg" alt="Bernard" class="avatar"> <div class="bubble"> <span class="name-tag">Bernard</span> Nope ! C‚Äôest l‚Äôentr√©e du parc Duroch. </div> </div>
    <div class="dialogue-row"> <img src="Serge.jpg" alt="Serge" class="avatar"> <div class="bubble"> <span class="name-tag">Serge</span> Du rock ! Trop bien, faut qu‚Äôon y aille ! </div> </div>
    <div class="narrative-note"> [il fonce en direction du parc] </div>
    <div class="dialogue-row"> <img src="Loumpour.jpg" alt="Loumpour et Bernard" class="avatar"> <div class="bubble"> <span class="name-tag">Loumpour & Bernard</span> Non ! Duroch, √ßa s‚Äô√©crit pas pareil ! Attends-nous. </div> </div>
    <div class="direction-box"> Remontez la rue Gilet sur quelques m√®tres. Vous pouvez entrer dans le parc par la porte monumentale ou par n'importe quel endroit. </div>
</div>
</section>
<section id="etape5" class="etape">
<div class="container">
    <h2>5. Le parc Duroch</h2>
    <div class="gps-box">
        üìç Cliquez pour y aller :<br>
        <a href="https://www.google.com/maps/search/?api=1&query=43.611114,1.340267" target="_blank" class="gps-link">
            N 43¬∞ 36.667' E 001¬∞ 20.416'
        </a>
    </div>

    <div class="dialogue-row"> <img src="Loumpour.jpg" alt="Loumpour" class="avatar"> <div class="bubble"> <span class="name-tag">Loumpour</span> Ouahou ! C‚Äôest beau. Ces arbres sont au moins centenaires. Ca ressemblait √† √ßa Colomiers √† l‚Äô√©poque ! Un petit village en pleine nature ! </div> </div>
    <div class="dialogue-row"> <img src="Serge.jpg" alt="Serge" class="avatar"> <div class="bubble"> <span class="name-tag">Serge</span> Ben, il est o√π le concert ? </div> </div>
    <div class="dialogue-row"> <img src="Bernard.jpg" alt="Bernard" class="avatar"> <div class="bubble"> <span class="name-tag">Bernard</span> Il est pour les estivades, d√©but juillet. C‚Äôest aussi ici qu‚Äôa lieu le cin√©ma en plein air en juillet et ao√ªt. Ce sont les rares moments o√π tu pourras y entendre de la musique. Sinon il y a aussi la foire aux plantes en mars, et la chasse aux ≈ìufs de P√¢ques. Mais g√©n√©ralement ce sont plut√¥t les boulistes qui s‚Äôy donnent rendez-vous, ainsi que les familles. </div> </div>
    <div class="dialogue-row"> <img src="Serge.jpg" alt="Serge" class="avatar"> <div class="bubble"> <span class="name-tag">Serge</span> Les boulistes. Tu veux dire ¬´ les p√©tanqueurs ¬ª (clin d‚Äô≈ìil √† son fr√®re). </div> </div>
    <div class="dialogue-row"> <img src="Loumpour.jpg" alt="Loumpour" class="avatar"> <div class="bubble"> <span class="name-tag">Loumpour</span> Non les gars arr√™tez ! </div> </div>
    <div class="narrative-note"> Serge : [prout] </div>
    <div class="narrative-note"> Bernard : [prout] </div>
    <div class="dialogue-row"> <img src="Loumpour.jpg" alt="Loumpour" class="avatar"> <div class="bubble"> <span class="name-tag">Loumpour</span> Rh√¥√¥‚Ä¶Vous √™tes lourds ! </div> </div>
    <div class="dialogue-row"> <img src="Loumpour.jpg" alt="Loumpour" class="avatar"> <div class="bubble"> <span class="name-tag">Loumpour</span> C‚Äôest quoi cette petite rotonde au milieu ? </div> </div>
    <div class="dialogue-row"> <img src="Serge.jpg" alt="Serge" class="avatar"> <div class="bubble"> <span class="name-tag">Serge</span> La potini√®re. Aujourd‚Äôhui c‚Äôest une salle associative servant √† de nombreuses activit√©s. Un rumeur dit qu‚Äôune potini√®re √©tait √† l‚Äôorigine un lieu o√π les gens venaient se raconter des potins. Aucune id√©e de si c‚Äôest vrai ou pas‚Ä¶ </div> </div>

    <div class="mission-box">
        La potini√®re est soutenue par des arches en m√©tal. Combien en comptez vous sur le b√¢timent ?
        <div class="answer-input-zone"> <label for="E" id="E-label">E =</label> <input type="number" id="E" min="0" max="99" required oninput="resetStandardInput('E')"> </div>
        <div id="validation-message-E"></div>
        <button id="validate-button-E" class="btn-default" onclick="handleStandardValidation('E')"> Valider la r√©ponse </button>
    </div>

    <div class="dialogue-row"> <img src="Loumpour.jpg" alt="Loumpour" class="avatar"> <div class="bubble"> <span class="name-tag">Loumpour</span> Et si c‚Äô√©tait √ßa le tr√©sor de Colomiers ? la douceur de vivre √† l‚Äôombre des pins parasols ? </div> </div>
    <div class="dialogue-row"> <img src="Serge.jpg" alt="Serge" class="avatar"> <div class="bubble"> <span class="name-tag">Serge</span> Eh non, fatche de cagole, tu confonds pitchoun, √ßa c‚Äôest le tr√©sor de Marseille, peuch√®re ! </div> </div>
    <div class="dialogue-row"> <img src="Loumpour.jpg" alt="Loumpour" class="avatar"> <div class="bubble"> <span class="name-tag">Loumpour</span> Vous en ratez pas une, hein ! </div> </div>
    <div class="dialogue-row"> <img src="Bernard.jpg" alt="Bernard" class="avatar"> <div class="bubble"> <span class="name-tag">Bernard</span> Regardez, y a un plan ici qui dit que l‚Äôancien H√¥tel de Ville est √† quelques m√®tres d‚Äôici. On trouvera peut-√™tre un truc‚Ä¶ </div> </div>
    <div class="direction-box"> Poursuivez sur la rue Gilet en laissant la rue Chrestias √† votre gauche. Quelques m√®tres plus loin tournez √† gauche sur la place Joseph Verseille. </div>
</div>
</section>
<section id="etape6" class="etape">
<div class="container">
    <h2>6. Place Joseph Verseille</h2>
    <div class="gps-box">
        üìç Cliquez pour y aller :<br>
        <a href="https://www.google.com/maps/search/?api=1&query=43.609642,1.339603" target="_blank" class="gps-link">
            N 43¬∞ 36.579' E 001¬∞ 20.376'
        </a>
    </div>

    <div class="dialogue-row"> <img src="Serge.jpg" alt="Serge" class="avatar"> <div class="bubble"> <span class="name-tag">Serge</span> Joseph Verseille‚Ä¶ j‚Äôai d√©j√† lu ce nom quelque part‚Ä¶ Mais o√π ? </div> </div>
    <div class="dialogue-row"> <img src="Bernard.jpg" alt="Bernard" class="avatar"> <div class="bubble"> <span class="name-tag">Bernard</span> J‚Äôaurais bien une r√©ponse √† te faire, mais √ßa va pas te plaire‚Ä¶ </div> </div>
    <div class="dialogue-row"> <img src="Loumpour.jpg" alt="Loumpour" class="avatar"> <div class="bubble"> <span class="name-tag">Loumpour</span> Bon, les gars, on peut redevenir un peu s√©rieux. Regardez cette photo : nous sommes sur l‚Äôancienne place du village. Il est dit que c‚Äôest l√† que les colum√©rins se rassemblaient pour les grandes f√™tes. Des tables √©taient dress√©es et on y partageait des repas avec tous les habitants. </div> </div>
    <a href="Verseille.jpg" target="_blank" class="image-link"> <img src="Verseille.jpg" alt="Ancienne place du village Place Joseph Verseille" class="illustration-grande"> </a>
    <div class="dialogue-row"> <img src="Bernard.jpg" alt="Bernard" class="avatar"> <div class="bubble"> <span class="name-tag">Bernard</span> Ca va bien quand t‚Äôes quelques centaines, mais tu rentreras pas 40.000 personnes sur cette petite place ! </div> </div>
    <div class="dialogue-row"> <img src="Loumpour.jpg" alt="Loumpour" class="avatar"> <div class="bubble"> <span class="name-tag">Loumpour</span> Moi je crois que c‚Äôest √ßa le tr√©sor de Colomiers. La dolce vita. Simplement le bonheur de vivre en paix. </div> </div>
    <div class="dialogue-row"> <img src="Serge.jpg" alt="Serge" class="avatar"> <div class="bubble"> <span class="name-tag">Serge</span> Euh, les gars, √ßa y est, je me suis souvenu d‚Äôo√π je connais le nom de Joseph Verseille. Il √©tait sur le monument aux morts, dans les F. F. I. J‚Äôai trouv√© un article qui raconte la lib√©ration de Colomiers. Le 19 ao√ªt 1944, 300 soldats allemands quittent la ville en faisant sauter les avions en r√©paration, les d√©p√¥ts de bombes, incendient des gerbiers et br√ªlent des caisses d‚Äôarchives √† la Mairie. C‚Äôest dans ce chaos qu‚Äôarrivera le d√©c√®s accidentel de Joseph Verseille sur les marches de la Mairie. </div> </div>
    <div class="dialogue-row"> <img src="Bernard.jpg" alt="Bernard" class="avatar"> <div class="bubble"> <span class="name-tag">Bernard</span> Ouaip. Tu repasseras quand m√™me pour la Dolce Vita. </div> </div>
    <div class="dialogue-row"> <img src="Loumpour.jpg" alt="Loumpour" class="avatar"> <div class="bubble"> <span class="name-tag">Loumpour</span> Gloups. Bon, ben faut chercher un autre tr√©sor. Peut-√™tre √† la nouvelle mairie ? </div> </div>
    <div class="dialogue-row"> <img src="Bernard.jpg" alt="Bernard" class="avatar"> <div class="bubble"> <span class="name-tag">Bernard</span> De toute fa√ßon, tant qu‚Äôon n‚Äôa pas de nouvelles de Didier, on peut continuer la balade‚Ä¶ </div> </div>

    <div class="mission-box">
       Le b√¢timent de l‚Äôancien Hotel de Ville a √©t√© conserv√© et restaur√©. Il est devenu un lieu municipal qui accompagne les porteurs de projets dans la cr√©ation professionnelle. Combien de lettres composent ce nom f√©minin commen√ßant par la lettre M (sans compter le d√©terminant) ?
        <div class="answer-input-zone"> <label for="F" id="F-label">F =</label> <input type="number" id="F" min="0" max="99" required oninput="resetStandardInput('F')"> </div>
        <div id="validation-message-F"></div>
        <button id="validate-button-F" class="btn-default" onclick="handleStandardValidation('F')"> Valider la r√©ponse </button>
    </div>
    <div class="direction-box"> En poursuivant de nouveau sur la rue Gilet vous arriverez au bout de la rue √† votre prochaine √©tape. </div>
</div>
</section>
<section id="etape7" class="etape">
<div class="container">
    <h2>7. Place de la bascule</h2>
    <div class="gps-box">
        üìç Cliquez pour y aller :<br>
        <a href="https://www.google.com/maps/search/?api=1&query=43.608117,1.338857" target="_blank" class="gps-link">
            N 43¬∞ 36.487' E 001¬∞ 20.331'
        </a>
    </div>

    <div class="dialogue-row"> <img src="Loumpour.jpg" alt="Loumpour" class="avatar"> <div class="bubble"> <span class="name-tag">Loumpour</span> Place de la bascule‚Ä¶ Ben je la vois pas, moi, la bascule‚Ä¶ </div> </div>
    <div class="dialogue-row"> <img src="Bernard.jpg" alt="Bernard" class="avatar"> <div class="bubble"> <span class="name-tag">Bernard</span> C‚Äôest normal, elle n‚Äôest plus l√† depuis plus de 50 ans. Mais c‚Äôest l√† que les colum√©rins venaient peser leurs r√©coltes √† la fin du XIX√®me si√®cle. </div> </div>
    <div class="dialogue-row"> <img src="Serge.jpg" alt="Serge" class="avatar"> <div class="bubble"> <span class="name-tag">Serge</span> Tiens, j‚Äôai trouv√© une vieille photo. Elle √©tait l√†, derri√®re la croix en m√©tal. </div> </div>
    <a href="Bascule.jpg" target="_blank" class="image-link"> <img src="Bascule.jpg" alt="Ancienne bascule de Colomiers" class="illustration-grande"> </a>
    <div class="dialogue-row"> <img src="Loumpour.jpg" alt="Loumpour" class="avatar"> <div class="bubble"> <span class="name-tag">Loumpour</span> Euh, les gars‚Ä¶ je me demande si je viens pas de trouver le tr√©sor ! Mais, √ßa me parait pas tr√®s l√©gal‚Ä¶ Regardez en face... Didier vous a pas demand√© de braquer des banques quand m√™me ??!! </div> </div>
    <div class="dialogue-row"> <img src="Bernard.jpg" alt="Bernard" class="avatar"> <div class="bubble"> <span class="name-tag">Bernard</span> Meuuh non ! T‚Äôes fou ! </div> </div>
    <div class="dialogue-row"> <img src="Serge.jpg" alt="Serge" class="avatar"> <div class="bubble"> <span class="name-tag">Serge</span> Tiens, tu parles vache maintenant toi ! Je savais pas ! </div> </div>
    <div class="dialogue-row"> <img src="Loumpour.jpg" alt="Loumpour" class="avatar"> <div class="bubble"> <span class="name-tag">Loumpour</span> Bon r√©fl√©chissons, qu‚Äôest-ce qui a pu faire la singularit√© de Colomiers et apporter richesse et prosp√©rit√© √† ses habitants ? </div> </div>
    <div class="dialogue-row"> <img src="Serge.jpg" alt="Serge" class="avatar"> <div class="bubble"> <span class="name-tag">Serge</span> Le fromage ! </div> </div>
    <div class="dialogue-row"> <img src="Bernard.jpg" alt="Bernard" class="avatar"> <div class="bubble"> <span class="name-tag">Bernard</span> Non, √ßa c‚Äôest le Coulommiers ! Rien √† voir ! </div> </div>
    <div class="dialogue-row"> <img src="Serge.jpg" alt="Serge" class="avatar"> <div class="bubble"> <span class="name-tag">Serge</span> Les chocolatines ! </div> </div>
    <div class="dialogue-row"> <img src="Bernard.jpg" alt="Bernard" class="avatar"> <div class="bubble"> <span class="name-tag">Bernard</span> Non, √ßa c‚Äôest tout le Sud-Ouest. </div> </div>
    <div class="dialogue-row"> <img src="Loumpour.jpg" alt="Loumpour" class="avatar"> <div class="bubble"> <span class="name-tag">Loumpour</span> Continuons, on trouvera peut-√™tre en chemin. </div> </div>

    <div class="mission-box">
       Avant de quitter la place de la bascule, attardez vous un peu sur la st√®le √† la m√©moire de Fran√ßois Larieu. Quel jour de juillet 1926 est-il n√© ? Notez ce chiffre qui vaut G 
        <div class="answer-input-zone"> <label for="G">G =</label> <input type="number" id="G" min="0" max="99" required oninput="resetStandardInput('G')"> </div>
        <div id="validation-message-G"></div>
        <button id="validate-button-G" class="btn-default" onclick="handleStandardValidation('G')"> Valider la r√©ponse </button>
    </div>

    <div class="direction-box"> Quittez la place de la bascule en prenant la rue d'Auch en direction de la cabane du p√™cheur (poissonnier) puis continuez jusqu'√† l'abri bus et retournez vous vers l'endroit d'o√π vous venez. </div>
</div>
</section>
<section id="etape8" class="etape">
<div class="container">
    <h2>8. Fresque murale</h2>
    <div class="gps-box">
        üìç Cliquez pour y aller :<br>
        <a href="https://www.google.com/maps/search/?api=1&query=43.607980,1.336761" target="_blank" class="gps-link">
            N 43¬∞ 36.479' E 001¬∞ 20.206'
        </a>
    </div>

        <div class="dialogue-row"> <img src="Loumpour.jpg" alt="Loumpour" class="avatar"> <div class="bubble"> <span class="name-tag">Loumpour</span> Ouhaou. Retournez-vous et regardez √ßa ! </div> </div>
    <div class="dialogue-row"> <img src="Serge.jpg" alt="Serge" class="avatar"> <div class="bubble"> <span class="name-tag">Serge</span> G√©nial. C‚Äôest trop rigolo. </div> </div>
    <div class="dialogue-row"> <img src="Bernard.jpg" alt="Bernard" class="avatar"> <div class="bubble"> <span class="name-tag">Bernard</span> Ah, ben, c‚Äôest pas √ßa notre tr√©sor ? L‚Äôart ! Ca a toujours exist√©. Et des fresques comme √ßa il y en a plein dans Colomiers, sur les immeubles, les transformateurs √©lectriques, dans les √©coles‚Ä¶ </div> </div>
    <div class="dialogue-row"> <img src="Serge.jpg" alt="Serge" class="avatar"> <div class="bubble"> <span class="name-tag">Serge</span> Et il y a aussi le salon de la Bande Dessin√©e tous les mois de novembre √† Colomiers depuis plus de 40 ans. C‚Äôest le troisi√®me plus grand festival de France derri√®re Angoul√®me et Quai des Bulles √† Saint Malo. </div> </div>
    <div class="dialogue-row"> <img src="Bernard.jpg" alt="Bernard" class="avatar"> <div class="bubble"> <span class="name-tag">Bernard</span> Ouaip ! 20.000 visiteurs annuels, c‚Äôest pas rien‚Ä¶ </div> </div>
    <div class="dialogue-row"> <img src="Loumpour.jpg" alt="Loumpour" class="avatar"> <div class="bubble"> <span class="name-tag">Loumpour</span> Tu crois que Didier veut qu‚Äôon se mette au graff ? Ou √† la BD ? Je comprends pas bien l√†‚Ä¶ Y doit y avoir un autre truc qui fait la renomm√©e de la ville‚Ä¶ C‚Äôest pas possible autrement. </div> </div>

    <div class="mission-box">
        Avant de poursuivre votre route, observez-bien la fresque murale. Combien le personnage (√† droite) avec les lunettes de soleil triangulaire a-t-il de dents ? Notez ce chiffre qui vaut H.
        <div class="answer-input-zone"> <label for="H">H =</label> <input type="number" id="H" min="0" max="99" required oninput="resetStandardInput('H')"> </div>
        <div id="validation-message-H"></div>
        <button id="validate-button-H" class="btn-default" onclick="handleStandardValidation('H')"> Valider la r√©ponse </button>
    </div>

    <div class="direction-box"> Continuez la route d'Auch jusqu'√†u rond-point, en suivant le passage am√©nag√© qui descend. Attention, ne traversez pas le rond-point par la voie des voitures. Prenez le passage souterrain qui vous am√®nera au bon endroit en s√©curit√©. <br> <br> Si vous √™tes en v√©lo, merci de descendre de v√©lo pour quelques m√®tres. </div>
</div>
</section>
<section id="etape9" class="etape">
<div class="container">
    <h2>9. Rond-point fontaine</h2>
    <div class="gps-box">
        üìç Cliquez pour y aller :<br>
        <a href="https://www.google.com/maps/search/?api=1&query=43.608606,1.336124" target="_blank" class="gps-link">
            N 43¬∞ 36.516' E 001¬∞ 20.167'
        </a>
    </div>

    <div class="dialogue-row"> <img src="Loumpour.jpg" alt="Loumpour" class="avatar"> <div class="bubble"> <span class="name-tag">Loumpour</span> Bon, qu‚Äôest-ce qu‚Äôon fait ici maintenant ? </div> </div>
    <div class="dialogue-row"> <img src="Serge.jpg" alt="Serge" class="avatar"> <div class="bubble"> <span class="name-tag">Serge</span> Tu cherchais quelque chose qui a fait la renomm√©e publique de Colomiers ? Ben voil√†‚Ä¶ </div> </div>
    <div class="dialogue-row"> <img src="Loumpour.jpg" alt="Loumpour" class="avatar"> <div class="bubble"> <span class="name-tag">Loumpour</span> Une fontaine ? Non, je vois pas. </div> </div>
    <div class="dialogue-row"> <img src="Bernard.jpg" alt="Bernard" class="avatar"> <div class="bubble"> <span class="name-tag">Bernard</span> Mais non, pas une fontaine, un rond-point ! </div> </div>
    <div class="dialogue-row"> <img src="Serge.jpg" alt="Serge" class="avatar"> <div class="bubble"> <span class="name-tag">Serge</span> La ville en compte presque une centaine, soit un tous les 500m en moyenne‚Ä¶ et pas un seul feu rouge ! </div> </div>
    <div class="dialogue-row"> <img src="Bernard.jpg" alt="Bernard" class="avatar"> <div class="bubble"> <span class="name-tag">Bernard</span> Dans les ann√©es 1950, Colomiers doit faire face √† l‚Äôarriv√©e massive des ouvriers de la construction a√©ronautique. La ville fait alors appel √† l‚Äôarchitecte-urbaniste Ren√© Viguier pour concevoir un plan d‚Äôurbanisme permettant d‚Äôaccueillir jusqu‚Äô√† 30.000 habitants. Il s‚Äôinspire de nouvelles villes anglaises comme Harlow et trace des grands boulevards reli√©s par des ronds-points. </div> </div>
    <div class="dialogue-row"> <img src="Serge.jpg" alt="Serge" class="avatar"> <div class="bubble"> <span class="name-tag">Serge</span> Sauf qu‚Äô√† cette √©poque, Colomiers est une des premi√®res villes de France √† avoir des ronds-points. Et le code de la route ne pr√©voit pas ce type d‚Äô√©quipements. On y applique donc la r√®gle de la priorit√© √† droite, ce qui signifie que ceux qui rentrent sur le rond-point sont prioritaires sur ceux qui sont sur l‚Äôanneau‚Ä¶ </div> </div>
    <div class="dialogue-row"> <img src="Loumpour.jpg" alt="Loumpour" class="avatar"> <div class="bubble"> <span class="name-tag">Loumpour</span> Mais √ßa devait √™tre super dangereux ! </div> </div>
    <div class="dialogue-row"> <img src="Bernard.jpg" alt="Bernard" class="avatar"> <div class="bubble"> <span class="name-tag">Bernard</span> Pour les colum√©rins qui savaient, non, mais pour les autres, oui. A la fin des ann√©es 90, il y avait pas mal d‚Äôaccrochages. Le conseil municipal a donc vot√© le changement et depuis octobre 2002 la priorit√© est la m√™me que partout en France. </div> </div>
    <div class="dialogue-row"> <img src="Serge.jpg" alt="Serge" class="avatar"> <div class="bubble"> <span class="name-tag">Serge</span> Mais pendant presque 50 ans, la ville a fonctionn√© diff√©remment, et sur plusieurs dizaines de ronds-points. Qu‚Äôest-ce que tu dis de √ßa, toi qui cherchais un truc qui a fait la renomm√©e de la ville ? </div> </div>
    <div class="dialogue-row"> <img src="Loumpour.jpg" alt="Loumpour" class="avatar"> <div class="bubble"> <span class="name-tag">Loumpour</span> (d√©√ßue) OK, mais‚Ä¶ c‚Äôest pas un tr√©sor ! </div> </div>
    <div class="dialogue-row"> <img src="Bernard.jpg" alt="Bernard" class="avatar"> <div class="bubble"> <span class="name-tag">Bernard</span> Bon, ben continuons alors‚Ä¶ </div> </div>

    <div class="mission-box">
        Si vous avez la fontaine dans votre dos, depuis l‚Äôendroit o√π vous vous trouvez, combien de fois pouvez-vous apercevoir l‚Äô√©criteau ¬´ eau non potable ¬ª (c‚Äôest un chiffre pair) ?
        <div class="answer-input-zone"> <label for="I">I =</label> <input type="number" id="I" min="0" max="99" required oninput="resetStandardInput('I')"> </div>
        <div id="validation-message-I"></div>
        <button id="validate-button-I" class="btn-default" onclick="handleStandardValidation('I')"> Valider la r√©ponse </button>
    </div>

    <div class="direction-box"> Continuez votre route en ressortant de l'autre c√¥t√© du rond-point et continuez sur l'all√©e des droits de l'enfant jusqu'au point suivant. </div>
</div>
</section>
<section id="etape10" class="etape">
<div class="container">
    <h2>10. Le pavillon blanc</h2>
    <div class="gps-box">
        üìç Cliquez pour y aller :<br>
        <a href="https://www.google.com/maps/search/?api=1&query=43.609384961946134, 1.3340337311585087" target="_blank" class="gps-link">
            N 43¬∞ 34.517' E 001¬∞ 19.176'
        </a>
    </div>

    <div class="dialogue-row"> <img src="Loumpour.jpg" alt="Loumpour" class="avatar"> <div class="bubble"> <span class="name-tag">Loumpour</span> C‚Äôest quoi ce b√¢timent √©trange devant lequel on vient de passer ? </div> </div>
    <div class="dialogue-row"> <img src="Bernard.jpg" alt="Bernard" class="avatar"> <div class="bubble"> <span class="name-tag">Bernard</span> Le pavillon blanc. D‚Äôapr√®s le site de la Mairie, il a √©t√© con√ßu par Rudy Riccioti en 2011. Il permet de r√©unir un espace m√©diath√®que (plus de 110.000 ouvrages) et un espace d√©di√© √† l‚Äôart contemporain. Je me souviens que Colomiers a toujours √©t√© une ville motrice en termes d‚Äôart contemporain. Il y avait une galerie √† quelques pas d‚Äôici qui s‚Äôappelait ¬´ l‚Äôespace des arts ¬ª o√π √©taient pr√©sent√©es des expositions temporaires. Elle est aujourd‚Äôhui occup√©e par une compagnie de th√©√¢tre qui fait aussi de la cr√©ation contemporaine. </div> </div>
    <div class="dialogue-row"> <img src="Serge.jpg" alt="Serge" class="avatar"> <div class="bubble"> <span class="name-tag">Serge</span> Et √ßa date pas d'hier. En 1982, Pierre Debeaux, connu pour √™tre l‚Äôarchitecte de la caserne Vion √† Toulouse, avait √©t√© choisi pour construire sur le rond-point de Flandres-Dunkerke une structure m√©tallique gigantesque en trois dimensions nomm√©e "Z√©thos". Un peu √† la fa√ßon d‚Äôun mobile de Calder, elle bougeait au gr√© du vent. Elle s‚Äôest malheureusement √©croul√©e 5 ans apr√®s son installation tuant deux personnes, qui √©taient venues pour tenter de la r√©parer car elle ne bougeait plus. </div> </div>
    <div class="dialogue-row"> <img src="Loumpour.jpg" alt="Loumpour" class="avatar"> <div class="bubble"> <span class="name-tag">Loumpour</span> Gloups‚Ä¶ Comme quoi l'art contemporain √ßa peut √™tre assez violent ! Euh, vous avez rien de plus joyeux ? </div> </div>
    <div class="dialogue-row"> <img src="Bernard.jpg" alt="Bernard" class="avatar"> <div class="bubble"> <span class="name-tag">Bernard</span> Ah, ben si ! Colomiers est √©galement lab√©lis√©e ‚Äúville amie des enfants‚Äù par l‚ÄôUNICEF depuis 2009, label renouvel√© au moins jusqu‚Äôen 2026. Elle s‚Äôengage au bien-√™tre, √† la non-discrimination et √† la participation des enfants dans la vie culturelle, politique et sportive. </div> </div>
    <div class="dialogue-row"> <img src="Loumpour.jpg" alt="Loumpour" class="avatar"> <div class="bubble"> <span class="name-tag">Loumpour</span> Eh, mais voil√† ! On l‚Äôa notre tr√©sor : les enfants ! C‚Äôest vieux comme le monde, et ils sont tellement mignons‚Ä¶ </div> </div>
    <div class="dialogue-row"> <img src="Serge.jpg" alt="Serge" class="avatar"> <div class="bubble"> <span class="name-tag">Serge</span> Ben si c‚Äôest √ßa ton tr√©sor, moi j‚Äôen veux pas ! Beurk ! Ca bave, √ßa crie ! Non merci ! </div> </div>

    <div class="mission-box">
        Sur la mosa√Øque √† vos pieds, combien d‚Äôenfants sont repr√©sent√©s en tout ? (attention, la colombe ne compte pas, c‚Äôest juste l‚Äôembl√®me de la ville)
        <div class="answer-input-zone"> <label for="J">J =</label> <input type="number" id="J" min="0" max="99" required oninput="resetStandardInput('J')"> </div>
        <div id="validation-message-J"></div>
        <button id="validate-button-J" class="btn-default" onclick="handleStandardValidation('J')"> Valider la r√©ponse </button>
    </div>

    <div class="dialogue-row"> <img src="Bernard.jpg" alt="Bernard" class="avatar"> <div class="bubble"> <span class="name-tag">Bernard</span> Euh, puisqu‚Äôon parlait art contemporain, c‚Äôest pas le centre Pompidou l√† √† gauche ? </div> </div>
    <div class="dialogue-row"> <img src="Serge.jpg" alt="Serge" class="avatar"> <div class="bubble"> <span class="name-tag">Serge</span> Beaubourg ? Non, c‚Äôest √† Paris. Mais effectivement c‚Äôest quoi ce gros tube vert qui sort du toit ? </div> </div>
    <div class="dialogue-row"> <img src="Loumpour.jpg" alt="Loumpour" class="avatar"> <div class="bubble"> <span class="name-tag">Loumpour</span> Il y a √©crit ¬´ espace nautique ¬ª, √ßa doit √™tre un toboggan aquatique‚Ä¶ </div> </div>
    <div class="dialogue-row">
        <div class="stacked-avatars-visible"> <img src="Serge.jpg" alt="Serge" class="avatar-left"> <img src="Bernard.jpg" alt="Bernard" class="avatar-right"> </div>
        <div class="bubble"> <span class="name-tag">Serge et Bernard</span> Un toboggan ! G√©niaaaallll !! On y vaaaa‚Ä¶. </div>
    </div>
    <div class="dialogue-row"> <img src="Loumpour.jpg" alt="Loumpour" class="avatar"> <div class="bubble"> <span class="name-tag">Loumpour</span> Mais attendez moi‚Ä¶ </div> </div>
    <div class="dialogue-row"> <img src="Loumpour.jpg" alt="Loumpour" class="avatar"> <div class="bubble"> <span class="name-tag">Loumpour</span> (√† elle-m√™me) Rhooo ils sont p√©nibles ! </div> </div>
    <div class="direction-box"> Prenez le premier chemin √† gauche, traversez la mare aux canards, passez devant l‚Äôespace nautique et poursuivez jusqu‚Äôau fond de la place des f√™tes pour mieux voir le toboggan. </div>
</div>
</section>
<section id="etape11" class="etape">
<div class="container">
    <h2>11. L‚Äôespace nautique</h2>
    <div class="gps-box">
        üìç Cliquez pour y aller :<br>
        <a href="https://www.google.com/maps/search/?api=1&query=43.608177,1.332450" target="_blank" class="gps-link">
            N 43¬∞ 36.491' E 001¬∞ 19.947'
        </a>
    </div>

    <div class="dialogue-row">
        <div class="stacked-avatars-visible"> <img src="Serge.jpg" alt="Serge" class="avatar-left"> <img src="Bernard.jpg" alt="Bernard" class="avatar-right"> </div>
        <div class="bubble"> <span class="name-tag">Serge et Bernard</span> ‚Ä¶ </div>
    </div>
    <div class="narrative-note"> (en pamoison devant le toboggan) </div>
    <div class="dialogue-row"> <img src="Loumpour.jpg" alt="Loumpour" class="avatar"> <div class="bubble"> <span class="name-tag">Loumpour</span> Ah ben, √ßa au moins √ßa vous en bouche un coin (coin). Ca va peut-√™tre vous √©tonner, mais c√¥t√© sport, je pense que j‚Äôen connais plus que vous ! Colomiers est une super ville connue dans le monde entier pour ses performances sportives. L‚ÄôUSC Colomiers Rugby a remport√© le challenge europ√©en en 1998 et a m√™me √©t√© vice champion d‚ÄôEurope en 1999 et finaliste du championnat de France en 2000 ! </div> </div>
    <div class="dialogue-row"> <img src="Serge.jpg" alt="Serge" class="avatar"> <div class="bubble"> <span class="name-tag">Serge</span> Ouais, mais √ßa vaut pas les performances du Stade Toulousain. </div> </div>
    <div class="dialogue-row"> <img src="Loumpour.jpg" alt="Loumpour" class="avatar"> <div class="bubble"> <span class="name-tag">Loumpour</span> Peut-√™tre mais pour une ville dix fois plus petite √ßa claque. Et en plus le Colomiers Rugby a aussi form√© de grands joueurs internationaux : Jean-Luc Sadourny, les Skrela p√®re et fils, et puis Fabien Galthi√© actuel s√©lectionneur de l‚Äô√©quipe de France ! </div> </div>
    <div class="dialogue-row"> <img src="Bernard.jpg" alt="Bernard" class="avatar"> <div class="bubble"> <span class="name-tag">Bernard</span> Ok, ok, mais t‚Äôas dis ¬´ le monde entier ¬ª. Les joueurs ne sont pas connus pour leur ville, mais pour le pays qu‚Äôils repr√©sentent. </div> </div>
    <div class="dialogue-row"> <img src="Loumpour.jpg" alt="Loumpour" class="avatar"> <div class="bubble"> <span class="name-tag">Loumpour</span> Peut-√™tre, mais qu‚Äôest-ce que tu dis de √ßa ? En 2022, neufs adolescents issus de Breakin‚ÄôSchool, l‚Äô√©cole de breakdance de Colomiers ont √©t√© sacr√©s Champions du Monde de breakdance au Japon ! </div> </div>
    <div class="dialogue-row"> <img src="Bernard.jpg" alt="Bernard" class="avatar"> <div class="bubble"> <span class="name-tag">Bernard</span> Ouahou, √ßa crache (blague de lama) ! Mais en attendant, c‚Äôest plut√¥t emb√™tant‚Ä¶ </div> </div>
    <div class="dialogue-row"> <img src="Loumpour.jpg" alt="Loumpour" class="avatar"> <div class="bubble"> <span class="name-tag">Loumpour</span> Je vois pas pourquoi. </div> </div>
    <div class="dialogue-row"> <img src="Bernard.jpg" alt="Bernard" class="avatar"> <div class="bubble"> <span class="name-tag">Bernard</span> Ben parce que √ßa nous fait un tr√©sor de plus ! Le sport aussi √ßa existe depuis toujours‚Ä¶ Alors, c‚Äôest quoi qu‚Äôon cherche ? Un coffre plein d‚Äôor cach√© dans un sous-terrain ? Les reliques d‚Äôune sainte ? La douceur de vivre ? De l‚Äôart (contemporain ou pas) ? Des ronds points ? Des enfants ? Je sais plus moi ! </div> </div>
    <div class="dialogue-row"> <img src="Bernard.jpg" alt="Bernard" class="avatar"> <div class="bubble"> <span class="name-tag">Bernard</span> Serge ! Il en est o√π Didier ? </div> </div>
    <div class="dialogue-row"> <img src="Serge.jpg" alt="Serge" class="avatar"> <div class="bubble"> <span class="name-tag">Serge</span> Je sais pas, je vais lui demander‚Ä¶ </div> </div>

    <div class="mission-box">
        Avant de quitter le parking, comptez du mieux que vous pourrez le nombre de tron√ßons de toboggan que vous voyez (certains sont cach√©s par la v√©g√©tation ou les murs, ce n‚Äôest pas grave). <br> Combien en comptez-vous √† peu pr√®s ?
        <div class="mission-options" onchange="handleQCMInput('K')">
            <label><input type="radio" name="K_choice" id="option1" value="1"> 1) une dizaine</label>
            <label><input type="radio" name="K_choice" id="option2" value="2"> 2) une vingtaine</label>
            <label><input type="radio" name="K_choice" id="option3" value="3"> 3) une quarantaine</label>
        </div>
        <br> Notez le chiffre correspondant √† la bonne r√©ponse qui vaut K :
        <div class="answer-input-zone"> <label for="K">K =</label> <input type="number" id="K" min="1" max="3" required readonly> </div>
        <div id="validation-message-K"></div>
        <br> (indice suppl√©mentaire : si vous multipliez ce chiffre par 5 vous saurez combien de m√®tres environ fait la longueur du toboggan !)
    </div>

    <div class="dialogue-row"> <img src="Loumpour.jpg" alt="Loumpour" class="avatar"> <div class="bubble"> <span class="name-tag">Loumpour</span> Bon allez, de toute fa√ßon, on avait dit direction la mairie. C‚Äôest parti ! </div> </div>
    <div class="direction-box"> Repassez devant l‚Äôentr√©e de l‚Äôespace nautique, poursuivez en face de vous en laissant l‚Äôaire de jeux et le city stade √† votre gauche puis tournez √† gauche au niveau du kiosque pour arriver devant l‚Äôancienne gare. </div>
</div>
</section>

<section id="etape12" class="etape">
<div class="container">
    <h2>12. L‚Äôancienne gare</h2>
    <div class="gps-box">
        üìç Cliquez pour y aller :<br>
        <a href="https://www.google.com/maps/search/?api=1&query=43.609695,1.332806" target="_blank" class="gps-link">
            N 43¬∞ 36.582' E 001¬∞ 19.968'
        </a>
    </div>

    <div class="narrative-note"> Bzzzt ! Bzzt ! </div>
    <div class="dialogue-row"> <img src="Serge.jpg" alt="Serge" class="avatar"> <div class="bubble"> <span class="name-tag">Serge</span> Ah, c‚Äôest Didier, il dit qu‚Äôil arrive rue du Prat‚Ä¶ Il en aura mis du temps. </div> </div>
    <div class="dialogue-row"> <img src="Loumpour.jpg" alt="Loumpour" class="avatar"> <div class="bubble"> <span class="name-tag">Loumpour</span> Bon, ben retour √† la case d√©part alors. En m√™me temps, maintenant c‚Äôest sur notre chemin. </div> </div>
    <div class="dialogue-row"> <img src="Bernard.jpg" alt="Bernard" class="avatar"> <div class="bubble"> <span class="name-tag">Bernard</span> Eh, vous avez vu ! Il est trop beau ce b√¢timent ! On dirait une gare ! </div> </div>
    <div class="dialogue-row"> <img src="Serge.jpg" alt="Serge" class="avatar"> <div class="bubble"> <span class="name-tag">Serge</span> Ben, c‚Äôest parce que c‚Äô√©tait une gare ! </div> </div>
    <div class="dialogue-row"> <img src="Bernard.jpg" alt="Bernard" class="avatar"> <div class="bubble"> <span class="name-tag">Bernard</span> Ici, au milieu de rien du tout ? </div> </div>
    <div class="dialogue-row"> <img src="Loumpour.jpg" alt="Loumpour" class="avatar"> <div class="bubble"> <span class="name-tag">Loumpour</span> Ben je suppose que tout s‚Äôest construit autour et qu‚Äôils ont enlev√© les rails apr√®s, nigaud ! </div> </div>
    <div class="dialogue-row"> <img src="Serge.jpg" alt="Serge" class="avatar"> <div class="bubble"> <span class="name-tag">Serge</span> Exactement ! D‚Äôapr√®s les infos que j‚Äôai, le train est arriv√© √† Colomiers en 1878. Et Colomiers est devenu un point de passage entre Toulouse et Auch. √áa aussi ce fut une richesse pour la ville ! Mais quand le projet d‚Äôam√©nagement de la ville a √©t√© mis en place, pour passer de 5.000 √† 30.000 habitants, les rails ont √©t√© d√©vi√©s et la gare a √©t√© d√©plac√©e 500 m√®tres plus au sud. </div> </div>
    <div class="dialogue-row"> <img src="Loumpour.jpg" alt="Loumpour" class="avatar"> <div class="bubble"> <span class="name-tag">Loumpour</span> Visiblement, aujourd‚Äôhui, c‚Äôest une ¬´ maison citoyenne ¬ª. </div> </div>
    <div class="dialogue-row"> <img src="Serge.jpg" alt="Serge" class="avatar"> <div class="bubble"> <span class="name-tag">Serge</span> Oui, il y en a plein dans toute la ville. Ce sont des lieux de proximit√© mis √† disposition des habitants pour les √©changes, l‚Äôentraide ou la vie associative. </div> </div>

    <div class="mission-box">
        Sur les murs de l‚Äôancienne gare, le nom de ¬´ Colomiers ¬ª a √©t√© taill√© dans la pierre. Mais combien de fois pr√©cis√©ment ?
        <br><br> Pensez √† bien faire le tour complet du b√¢timent pour trouver la bonne r√©ponse.
        <br><br> Notez ce chiffre qui vaut L :
        <div class="answer-input-zone">
            <label for="L">L =</label>
            <input type="number" id="L" min="0" max="9" required onchange="handleEnigmaInput_L('L')" onkeyup="handleEnigmaInput_L('L')">
        </div>
        <div id="validation-message-L"></div>
    </div>

    <div class="direction-box"> Revenez vers le kiosque et remontez quelques m√®tres encore sur l‚Äôall√©e des droits de l‚Äôenfant. Au passage clout√©, dirigez vous vers la mairie et la place Alex Raymond. </div>
</div>
</section>

<section id="etape13" class="etape">
<div class="container">
    <h2>13. Place Alex Raymond</h2>
    <div class="gps-box">
        üìç Cliquez pour y aller :<br>
        <a href="https://www.google.com/maps/search/?api=1&query=43.610179,1.334539" target="_blank" class="gps-link">
            N 43¬∞ 36.611' E 001¬∞ 20.072'
        </a>
    </div>

    <div class="dialogue-row"> <img src="Serge.jpg" alt="Serge" class="avatar"> <div class="bubble"> <span class="name-tag">Serge</span> Vous entendez ?? </div> </div>
    <div class="dialogue-row">
        <div class="stacked-avatars-visible"> <img src="Loumpour.jpg" alt="Loumpour" class="avatar-left"> <img src="Bernard.jpg" alt="Bernard" class="avatar-right"> </div>
        <div class="bubble"> <span class="name-tag">Loumpour et Bernard (perplexes)</span> Euh‚Ä¶ non, quoi ? </div>
    </div>
    <div class="dialogue-row"> <img src="Serge.jpg" alt="Serge" class="avatar"> <div class="bubble"> <span class="name-tag">Serge</span> Les bruits de la f√™te‚Ä¶ les flonflons, les accord√©ons, les man√®ges‚Ä¶ </div> </div>
    <div class="dialogue-row"> <img src="Loumpour.jpg" alt="Loumpour" class="avatar"> <div class="bubble"> <span class="name-tag">Loumpour</span> Euh, j‚Äôentends rien, mais c‚Äôest s√ªrement parce que t‚Äôes plus sensible √† la musique que nous‚Ä¶ </div> </div>
    <div class="dialogue-row"> <img src="Bernard.jpg" alt="Bernard" class="avatar"> <div class="bubble"> <span class="name-tag">Bernard</span> Oui, et aussi parce que nous sommes pr√©cis√©ment √† l‚Äôendroit o√π se dressait le m√¢t de cocagne. Avant la construction du nouvel H√¥tel de Ville en 1991, cette place √©tait une simple place couverte de bitume, sans rien autour. Mais en son centre on trouvait encore le fameux m√¢t typique des festivit√©s du Lauragais. </div> </div>
    <div class="dialogue-row"> <img src="Serge.jpg" alt="Serge" class="avatar"> <div class="bubble"> <span class="name-tag">Serge</span> C‚Äôest pas le truc o√π il faut grimper tout en haut pour d√©crocher du jambon et le m√¢t √©tait frott√© avec de la graisse ou du savon pour t‚Äôemp√™cher de grimper ? </div> </div>
    <div class="dialogue-row"> <img src="Bernard.jpg" alt="Bernard" class="avatar"> <div class="bubble"> <span class="name-tag">Bernard</span> Exactement ! Seuls les plus habiles et muscl√©s parvenaient √† ramener quelque chose. </div> </div>
    <div class="dialogue-row"> <img src="Loumpour.jpg" alt="Loumpour" class="avatar"> <div class="bubble"> <span class="name-tag">Loumpour (r√™veuse)</span> ‚Ä¶ un jeu o√π pour gagner il suffit de savoir monter aux arbres‚Ä¶ un vrai r√™ve de koala‚Ä¶ </div> </div>
    <div class="dialogue-row"> <img src="Bernard.jpg" alt="Bernard" class="avatar"> <div class="bubble"> <span class="name-tag">Bernard</span> Aujourd‚Äôhui les festivit√©s du 14 juillet sont toujours c√©l√©br√©es ici avec les man√®ges de la f√™te foraine, et le feu d‚Äôartifice est tir√© le 13 juillet au soir sur le frontispice de l‚ÄôHotel de Ville. </div> </div>
    <div class="dialogue-row"> <img src="Loumpour.jpg" alt="Loumpour" class="avatar"> <div class="bubble"> <span class="name-tag">Loumpour</span> Le 13 juillet‚Ä¶ ouais, y a pas qu‚Äôen mati√®re de rugby qu‚Äôon craint la concurrence de Toulouse‚Ä¶ </div> </div>
    <div class="dialogue-row"> <img src="Serge.jpg" alt="Serge" class="avatar"> <div class="bubble"> <span class="name-tag">Serge</span> Tiens, puisque tu nous reparles de rugby, regarde, l√†, le Sadourny Caf√©. Ton ancien arri√®re du XV de France, il est restaurateur maintenant ! </div> </div>
    <div class="dialogue-row"> <img src="Loumpour.jpg" alt="Loumpour" class="avatar"> <div class="bubble"> <span class="name-tag">Loumpour</span> J‚Äôesp√®re qu‚Äôil y a des plats √† l‚Äôeucalyptus ! </div> </div>

    <div class="mission-box">
        Attardez vous un peu sur l‚Äôesplanade de la mairie. En regardant la porte d‚Äôentr√©e de l‚Äô√©difice depuis votre position, combien de topiaires (petits arbustes taill√©s pr√©cautionneusement) comptez-vous ?
        <br> Ajoutez ceux √† votre gauche et ceux √† votre droite. C‚Äôest un nombre impair.
        <br><br> Notez ce nombre qui vaut M :
        <div class="answer-input-zone">
            <label for="M">M =</label>
            <input type="number" id="M" min="0" max="99" required oninput="resetValidation_M('M')">
        </div>
        <div id="validation-message-M"></div>
        <button id="validate-button-M" class="btn-default" onclick="handleValidation_M('M')">
            Valider la r√©ponse
        </button>
    </div>

    <div class="direction-box">
        Quittez √† pr√©sent la place en laissant l‚ÄôH√¥tel de ville sur votre droite. Puis empruntez l‚Äôavenue d‚ÄôOccitanie vers la droite.
        <br><br> <strong>Deux possibilit√©s s‚Äôoffrent √† vous :</strong>
        <div class="path-option"> <strong>1. Option "Passerelle" :</strong> 
            Soit passer par le square des marronniers (<a href="https://www.google.com/maps/search/?api=1&query=43.611912,1.333595" target="_blank" class="path-link">N 43¬∞ 36.715' E 001¬∞ 20.016'</a>) 
            puis la passerelle (<a href="https://www.google.com/maps/search/?api=1&query=43.612387,1.333596" target="_blank" class="path-link">N 43¬∞ 36.743' E 001¬∞ 20.016'</a>) 
            apr√®s quoi vous contournerez le premier immeuble en le laissant √† votre gauche. 
        </div>
        <div class="path-option"> <strong>2. Option "Rue de Limogne" :</strong> 
            Soit vous empruntez la rue de Limogne (<a href="https://www.google.com/maps/search/?api=1&query=43.611545,1.333881" target="_blank" class="path-link">N 43¬∞ 36.693' E 001¬∞ 20.033'</a>) 
            jusqu‚Äôau <a href="https://www.google.com/maps/search/?api=1&query=43.612100,1.334133" target="_blank" class="path-link">N 43¬∞ 36.726' E 001¬∞ 20.048'</a> 
            et vous prenez en face au passage pi√©ton. 
        </div>
    </div>
</div>
</section>

<section id="etape14" class="etape">
<div class="container">
    <h2>14. La st√®le comm√©morative</h2>
    <div class="gps-box">
        üìç Cliquez pour y aller :<br>
        <a href="https://www.google.com/maps/search/?api=1&query=43.612430,1.334364" target="_blank" class="gps-link">
            N 43¬∞ 36.746' E 001¬∞ 20.062'
        </a>
    </div>

    <div class="dialogue-row"> <img src="Loumpour.jpg" alt="Loumpour" class="avatar"> <div class="bubble"> <span class="name-tag">Loumpour</span> Allez, plus que quelques m√®tres et nous serons rue du Prat. Il va m‚Äôentendre le Didier ! </div> </div>
    <div class="dialogue-row"> <img src="Serge.jpg" alt="Serge" class="avatar"> <div class="bubble"> <span class="name-tag">Serge</span> Eh, attendez, regardez ! C‚Äôest quoi cette st√®le ? </div> </div>
    <div class="dialogue-row"> <img src="Bernard.jpg" alt="Bernard" class="avatar"> <div class="bubble"> <span class="name-tag">Bernard</span> J‚Äôsais pas‚Ä¶ </div> </div>
    <div class="dialogue-row"> <img src="Loumpour.jpg" alt="Loumpour" class="avatar"> <div class="bubble"> <span class="name-tag">Loumpour</span> JU88 N¬∞6‚Ä¶ pour moi c‚Äôest du charabia‚Ä¶ </div> </div>
    <div class="dialogue-row"> <img src="Serge.jpg" alt="Serge" class="avatar"> <div class="bubble"> <span class="name-tag">Serge</span> Attends, je regarde √ßa‚Ä¶13 novembre 1944 √† 10h50, un Junker JU88 en mission de guerre a√©rienne contre les forces allemandes d√©colle de Toulouse. Suite √† une avarie il perd de la vitesse, heurte le sol de l‚Äôaile puis s‚Äô√©crase contre une maison. L‚Äôappareil est d√©truit et l‚Äôint√©gralit√© de l‚Äô√©quipage meurt carbonis√©. </div> </div>
    <div class="dialogue-row"> <img src="Loumpour.jpg" alt="Loumpour" class="avatar"> <div class="bubble"> <span class="name-tag">Loumpour</span> Beurk‚Ä¶ Les pauvres. </div> </div>
    <div class="dialogue-row"> <img src="Bernard.jpg" alt="Bernard" class="avatar"> <div class="bubble"> <span class="name-tag">Bernard</span> Colomiers a plut√¥t √©t√© √©pargn√©e par les troupes allemandes par rapport a certaines autres villes, mais la R√©sistance a √©t√© tr√®s pr√©sente, notamment avec le Maquis ¬´ Roger ¬ª dirig√© par Pierre Touron. </div> </div>
    <div class="dialogue-row"> <img src="Loumpour.jpg" alt="Loumpour" class="avatar"> <div class="bubble"> <span class="name-tag">Loumpour</span> C‚Äôest pas √† Colomiers que L√©on Blum a √©t√© arr√™t√© ? </div> </div>
    <div class="dialogue-row"> <img src="Bernard.jpg" alt="Bernard" class="avatar"> <div class="bubble"> <span class="name-tag">Bernard</span> Si ! Au ch√¢teau de l‚Äôarmurier, √† 1km d‚Äôici, le 15 septembre 1940. C‚Äôest m√™me l√† qu‚Äôil a re√ßu l‚Äôinvitation de Roosevelt √† partir aux Etats-Unis pour fuir le r√©gime de Vichy qui commen√ßait √† sacr√©ment pencher du mauvais c√¥t√©. Invitation qu‚Äôil a d√©clin√©e, pr√©f√©rant tenter de sauver ce qu‚Äôil esp√©rait pouvoir sauver. </div> </div>
    <div class="dialogue-row"> <img src="Serge.jpg" alt="Serge" class="avatar"> <div class="bubble"> <span class="name-tag">Serge</span> Et rue du Prat, c‚Äôest la famille de Georges Kiejman, avocat et homme politique, qui a √©t√© rafl√©e. </div> </div>
    <div class="dialogue-row"> <img src="Loumpour.jpg" alt="Loumpour" class="avatar"> <div class="bubble"> <span class="name-tag">Loumpour</span> Brrr‚Ä¶ √ßa fait froid dans le dos tout √ßa‚Ä¶ bon si on passait √† autre chose. Allez, Didier nous attend avec un tr√©sor, on file. </div> </div>

    <h2>MISSION</h2>
    <div class="mission-box">
        Avant de quitter ce lieu de comm√©moration, observez la plaque comm√©morative. Trois des pr√©noms qui y sont inscrits comportent exactement le m√™me nombre de lettres. Combien pr√©cis√©ment ? Notez ce chiffre qui vaut N
        <div class="answer-input-zone">
            <label for="N">N =</label>
            <input type="number" id="N" min="0" max="99" required oninput="resetValidation_N('N')">
        </div>
        <div id="validation-message-N"></div>
        <button id="validate-button-N" class="btn-default" onclick="handleValidation_N('N')">
            Valider la r√©ponse
        </button>
    </div>

    <div class="direction-box"> Poursuivez sur la rue des garibaldiens, au bout de la rue prenez √† droite et descendez la rue du Prat en direction de la place Firmin Pons. Arr√™tez-vous au point GPS d√©fini. </div>
</div>
</section>

<div id="warning-etape15">
    <h2>√âtape 15 Verrouill√©e üîí</h2>
    <p>Pour passer √† l'√©tape 15 vous devez avoir donn√© une r√©ponse √† toutes les questions (A √† N).</p>
    <p>V√©rifiez les √©tapes pr√©c√©dentes.</p>
</div>

<section id="etape15" class="etape" style="display: none;">
<div class="container">
    <h2>15. Le tr√©sor</h2>
    <div class="gps-box">
        üìç Lieu de la r√©v√©lation (√† proximit√© du tr√©sor) :<br>
        <a href="https://www.google.com/maps/search/?api=1&query=43.613672,1.335429" target="_blank" class="gps-link">
            N 43¬∞ 36.820' E 001¬∞ 20.126'
        </a>
    </div>

    <div class="dialogue-row"> <img src="Loumpour.jpg" alt="Loumpour" class="avatar"> <div class="bubble"> <span class="name-tag">Loumpour</span> DIDIER !! DIDIER !!! </div> </div>
    <div class="dialogue-row"> <img src="didier.jpg" alt="Didier" class="avatar"> <div class="bubble"> <span class="name-tag">Didier</span> Eh, salut les copains ! Ca fait une heure que je vous cherche ! </div> </div>
    <div class="dialogue-row"> <img src="Loumpour.jpg" alt="Loumpour" class="avatar"> <div class="bubble"> <span class="name-tag">Loumpour</span> Tu rigoles ou quoi ! On a eu le temps de faire trois fois le tour de la ville ! Bon c‚Äôest quoi cette histoire de tr‚Ä¶ </div> </div>
    <div class="dialogue-row"> <img src="Didier.jpg" alt="Didier" class="avatar"> <div class="bubble"> <span class="name-tag">Didier</span> STOP ! Attention, tu vas marcher sur mon tr√©sor ! </div> </div>
    <div class="dialogue-row"> <img src="Loumpour.jpg" alt="Loumpour" class="avatar"> <div class="bubble"> <span class="name-tag">Loumpour</span> O√π ?! Quoi ?! Y a rien par terre ! </div> </div>
    <div class="dialogue-row"> <img src="Didier.jpg" alt="Didier" class="avatar"> <div class="bubble"> <span class="name-tag">Didier</span> Si l√† regarde ! </div> </div>
    <div class="dialogue-row"> <img src="Loumpour.jpg" alt="Loumpour" class="avatar"> <div class="bubble"> <span class="name-tag">Loumpour</span> Ca c‚Äôest pas un tr√©sor, c‚Äôest du caca de pigeon ! </div> </div>
    <div class="dialogue-row"> <img src="Didier.jpg" alt="Didier" class="avatar"> <div class="bubble"> <span class="name-tag">Didier</span> Ben oui, justement ! La fiente est un engrais merveilleux ! Un v√©ritable tr√©sor ! C‚Äôest √† √ßa qu'on mesurait au Moyen √Çge la richesse d‚Äôune ville. La colombine est un des plus puissants engrais naturels - √† utiliser avec mod√©ration bien-s√ªr. D‚Äôailleurs le nom de Colomiers vient en fait d‚Äôune d√©formation de ¬´ Colombiers ¬ª qui √©tait l‚Äôancien nom qu‚Äôon donnait aux pigeonniers. Il y en a partout dans la ville encore aujourd‚Äôhui (des pigeonniers, la fiente c'est plus par ici qu'on en trouve) ! Et la colombe est toujours l‚Äôembl√®me de la ville. <br><br> D‚Äôailleurs, c‚Äô√©tait un signe de richesse √©conomique mais aussi de pouvoir. La plupart des propri√©taires de colombiers essayaient ainsi de devenir ¬´ co-seigneurs ¬ª. C‚Äôest comme √ßa qu‚Äôa commenc√© la prosp√©rit√© de la ville, au pied du Fort qui se trouvait √† quelques pas d‚Äôici. </div> </div>
    <div class="dialogue-row"> <img src="Loumpour.jpg" alt="Loumpour" class="avatar"> <div class="bubble"> <span class="name-tag">Loumpour (abattue)</span> Tu nous as fait faire tout √ßa pour de la m‚Ä¶ </div> </div>
    <div class="dialogue-row"> <img src="Didier.jpg" alt="Didier" class="avatar"> <div class="bubble"> <span class="name-tag">Didier</span> De la fiente, oui ! Mais tu sais, √ßa donne bon go√ªt aux fleurs quand on les butine ! </div> </div>
    <div class="dialogue-row"> <img src="Loumpour.jpg" alt="Loumpour" class="avatar"> <div class="bubble"> <span class="name-tag">Loumpour</span> Bon allez, les blaireaux, √ßa suffit ! On rentre maintenant ! </div> </div>
    <div class="dialogue-row"> <img src="Serge.jpg" alt="Serge" class="avatar"> <div class="bubble"> <span class="name-tag">Serge</span> On est pas des blaireaux ! On est des lamas ! </div> </div>
    <div class="dialogue-row"> <img src="Bernard.jpg" alt="Bernard" class="avatar"> <div class="bubble"> <span class="name-tag">Bernard</span> Laisse-l√†, elle a pas l‚Äô√¢me √† √ßa ! </div> </div>
    <div class="dialogue-row"> <img src="Serge.jpg" alt="Serge" class="avatar"> <div class="bubble"> <span class="name-tag">Serge</span> Allez ! Salut Didier ! A une prochaine ! </div> </div>

    <div class="mission-box">
        <h3>L'√âNIGME FINALE : V√âRIFICATION DES VARIABLES</h3>
        <p>Utilisez la grille ci-dessous pour v√©rifier et corriger vos 14 variables. Le petit mot au-dessus de chaque champ vous rappelle l'indice associ√©. Vous devez obtenir le statut VERT pour chaque variable afin de d√©bloquer le tr√©sor.</p>
        <div id="variable-list"> </div>
        <div class="legend">
            <p><span class="status-dot dot-green"></span> Vert : La valeur saisie est correcte.</p>
            <p><span class="status-dot dot-red"></span> Rouge : La valeur saisie est incorrecte.</p>
        </div>
        <hr style="margin: 20px 0;">
        <h4>Formule de Calcul des Coordonn√©es (Pour information) :</h4>
        <div class="final-formula-display"> N 4(E/A)¬∞(L)(N).(B)(J-I)(G)‚Ä≤ E 1¬∞(F+M).(D+H+K)(C)‚Ä≤ </div>
        <div class="final-check-zone">
            <button onclick="checkFinalAnswer()">Par ici le Tr√©sor ! üß≠</button>
            <div id="result-message"></div>
            <div id="final-link-box">
                <p style="font-weight: bold; color: #2980b9;"> Votre calcul est correct ! Le Tr√©sor se trouve aux coordonn√©es : <br> N 43¬∞ 36.765‚Ä≤ E 1¬∞ 20.171‚Ä≤ </p>
                <a id="final-gps-link" href="https://www.google.com/maps/search/?api=1&query=43.61275,1.336183" target="_blank" style="display: inline-block; padding: 10px 15px; background-color: #2ecc71; color: white; border-radius: 5px; text-decoration: none; font-size: 16px;">
                    Voir la cache sur la carte !
                </a>
                <p style="font-size: 12px; color: #666; margin-top: 10px;">(Utilisez les coordonn√©es pr√©cises ci-dessus pour la recherche finale du contenant.)</p>
            </div>
        </div>
    </div>
    <div class="direction-box"> Finissez de descendre la rue du Prat pour retrouver la place Firmin Pons d‚Äôo√π vous avez commenc√© ce p√©riple. </div>
</div>
</section>

<script>
    // ----------------------------------------------------------------------
    // --- GESTION ET PERSISTANCE DES DONN√âES (UNIFI√â 1-15) ---
    // ----------------------------------------------------------------------

    const ENIGMA_STORAGE_KEY = 'colomiers_enigma_answers';
    const DEFAULT_ANSWERS = {A: null, B: null, C: null, D: null, E: null, F: null, G: null, H: null, I: null, J: null, K: null, L: null, M: null, N: null};

    // =================================================================================
    // VALEURS CORRECTES (Pour Etape 15)
    const CORRECT_ANSWERS = {
        A: 2, B: 7, C: 1, D: 13, E: 6, F: 9, G: 5, H: 2, I: 2, J: 8, K: 2, L: 3, M: 11, N: 6
    };
    
    // RAPPELS (Pour Etape 15)
    const REMINDERS = {
        A: 'tours', B: 'losanges', C: 'centaines', D: '"Jean"', E: 'arches', 
        F: 'lettres', G: 'juillet', H: 'dents', I: 'non potable', J: 'enfants', 
        K: 'toboggan', L: 'gare', M: 'topiaires', N: 'pr√©noms'
    };
    // =================================================================================
    
    function loadEnigmaAnswers() {
        try {
            const savedData = localStorage.getItem(ENIGMA_STORAGE_KEY);
            if (!savedData) return DEFAULT_ANSWERS;
            return {...DEFAULT_ANSWERS, ...JSON.parse(savedData)};
        } catch (e) {
            console.error("Impossible de charger les r√©ponses. R√©initialisation des donn√©es.", e);
            return DEFAULT_ANSWERS;
        }
    }

    function saveEnigmaAnswers(vars) {
        try {
            localStorage.setItem(ENIGMA_STORAGE_KEY, JSON.stringify(vars));
        } catch (e) {
            console.error("Impossible de sauvegarder les r√©ponses. Le stockage local est bloqu√©.", e);
        }
        checkUnlockCondition();
    }
    
    function resetButtonToDefault(button) {
        if (button) {
            button.classList.remove('btn-validated');
            button.classList.add('btn-default');
            button.textContent = "Valider la r√©ponse";
        }
    }

    // ----------------------------------------------------------------------
    // --- V√âRIFICATION DE D√âVERROUILLAGE (Etape 15) ---
    // ----------------------------------------------------------------------
    
    function checkUnlockCondition() {
        const vars = loadEnigmaAnswers();
        let allAnswered = true;
        
        for (const key in DEFAULT_ANSWERS) {
            if (vars[key] === null) {
                allAnswered = false;
                break;
            }
        }
        
        const warningDiv = document.getElementById('warning-etape15');
        const etape15Div = document.getElementById('etape15');

        if (allAnswered) {
            if (warningDiv) warningDiv.style.display = 'none';
            if (etape15Div) etape15Div.style.display = 'block';
            initFinalPage();
        } else {
            if (warningDiv) warningDiv.style.display = 'block';
            if (etape15Div) etape15Div.style.display = 'none';
        }
    }

    // ----------------------------------------------------------------------
    // --- FONCTIONS POUR √âNIGMES STANDARD (A-J) ---
    // ----------------------------------------------------------------------

    function resetStandardInput(varKey) {
        const inputElement = document.getElementById(varKey);
        const button = document.getElementById('validate-button-' + varKey);
        const validationMessage = document.getElementById('validation-message-' + varKey);
        
        if (button) resetButtonToDefault(button);
        if (validationMessage) validationMessage.textContent = "";

        if (inputElement) {
            const rawValue = inputElement.value.trim();
            if (rawValue === "") {
                let currentVars = loadEnigmaAnswers();
                currentVars[varKey] = null;
                saveEnigmaAnswers(currentVars);
            }
        }
    }

    function handleStandardValidation(varKey) {
        const inputElement = document.getElementById(varKey);
        const button = document.getElementById('validate-button-' + varKey);
        const validationMessage = document.getElementById('validation-message-' + varKey);
        
        if (!inputElement || !button || !validationMessage) return;

        const rawValue = inputElement.value.trim();
        const value = parseInt(rawValue);
        let currentVars = loadEnigmaAnswers();
        
        validationMessage.textContent = "";

        if (rawValue === "") {
            validationMessage.textContent = "‚ùå Veuillez entrer une valeur num√©rique.";
            currentVars[varKey] = null;
            saveEnigmaAnswers(currentVars);
            resetButtonToDefault(button);
            return;
        }
        
        if (isNaN(value) || value < 0 || value > 99 || rawValue.includes('.')) {
            validationMessage.textContent = "‚ùå Valeur incorrecte. Veuillez entrer un nombre entier positif entre 0 et 99.";
            currentVars[varKey] = null;
            saveEnigmaAnswers(currentVars);
            resetButtonToDefault(button);
            return;
        }

        if (varKey === 'D' && value % 2 === 0) {
            validationMessage.textContent = "‚ùå La r√©ponse doit √™tre un chiffre impair.";
            currentVars[varKey] = null; 
            saveEnigmaAnswers(currentVars);
            resetButtonToDefault(button);
            return;
        }
        if (varKey === 'I' && value % 2 !== 0) {
            validationMessage.textContent = "‚ùå La r√©ponse doit √™tre un chiffre pair.";
            currentVars[varKey] = null;
            saveEnigmaAnswers(currentVars);
            resetButtonToDefault(button);
            return;
        }
        
        currentVars[varKey] = value;
        saveEnigmaAnswers(currentVars);
        
        button.classList.remove('btn-default');
        button.classList.add('btn-validated');
        button.textContent = `R√©ponse ${varKey} = ${value} Sauvegard√©e !`;
    }
    
    function initStandardInput(varKey) {
        const loadedVars = loadEnigmaAnswers();
        const inputElement = document.getElementById(varKey);
        const button = document.getElementById('validate-button-' + varKey);
        const savedValue = loadedVars[varKey];
        
        if (inputElement) inputElement.value = "";
        
        if (button && savedValue !== null) {
            button.classList.remove('btn-default');
            button.classList.add('btn-validated');
            button.textContent = `R√©ponse ${varKey} = ${savedValue} Sauvegard√©e !`;
        } else if (button) {
            resetButtonToDefault(button);
        }
        
        if(inputElement) inputElement.oninput = () => resetStandardInput(varKey);
    };

    // ----------------------------------------------------------------------
    // --- FONCTIONS POUR √âNIGMES QCM (K) ---
    // ----------------------------------------------------------------------

    function handleQCMInput(varKey) {
        const inputElement = document.getElementById(varKey);
        const validationMessage = document.getElementById('validation-message-' + varKey);
        const selectedRadio = document.querySelector(`input[name="${varKey}_choice"]:checked`);
        
        let value = null;
        let currentVars = loadEnigmaAnswers();

        if (selectedRadio) {
            value = parseInt(selectedRadio.value);
            inputElement.value = value;
            currentVars[varKey] = value;
            validationMessage.classList.remove('error');
            validationMessage.textContent = `‚úÖ R√©ponse ${varKey} = ${value} Sauvegard√©e !`;
        } else {
            inputElement.value = "";
            currentVars[varKey] = null;
            validationMessage.classList.add('error');
            validationMessage.textContent = "‚ùå Veuillez s√©lectionner une option.";
        }
        
        saveEnigmaAnswers(currentVars);
    }
    
    function initQCMInput(varKey) {
        const loadedVars = loadEnigmaAnswers();
        const inputElement = document.getElementById(varKey);
        const validationMessage = document.getElementById('validation-message-' + varKey);
        const savedValue = loadedVars[varKey];
        
        if (inputElement && savedValue !== null) {
            inputElement.value = savedValue;
            const savedRadio = document.querySelector(`input[name="${varKey}_choice"][value="${savedValue}"]`);
            if(savedRadio) {
                savedRadio.checked = true;
                validationMessage.classList.remove('error');
                validationMessage.textContent = `‚úÖ R√©ponse ${varKey} = ${savedValue} d√©j√† sauvegard√©e.`;
            }
        } else if (validationMessage) {
            if(inputElement) inputElement.value = "";
        }
    };

    // ----------------------------------------------------------------------
    // --- FONCTIONS POUR √âNIGME (L) - (Sauvegarde auto) ---
    // ----------------------------------------------------------------------
    
    function handleEnigmaInput_L(varKey) {
        const inputElement = document.getElementById(varKey);
        const validationMessage = document.getElementById(`validation-message-${varKey}`);
        
        let value = inputElement.value.trim();
        let numericValue = parseFloat(value);
        let currentVars = loadEnigmaAnswers();
        validationMessage.textContent = "";

        if (value === "") {
            currentVars[varKey] = null;
            saveEnigmaAnswers(currentVars);
            return;
        }
        
        if (isNaN(numericValue) || numericValue < 0 || numericValue > 9 || numericValue % 1 !== 0) {
            validationMessage.textContent = "‚ùå Veuillez entrer un chiffre unique (0-9).";
            validationMessage.style.color = "#e74c3c";
            currentVars[varKey] = null;
            saveEnigmaAnswers(currentVars);
            return;
        }
        
        currentVars[varKey] = parseInt(value); 
        saveEnigmaAnswers(currentVars);
        
        validationMessage.textContent = `‚úÖ Chiffre ${varKey} = ${parseInt(value)} sauvegard√© !`;
        validationMessage.style.color = "#2ecc71";
    }
    
    function initEnigmaPage_L(varKey) {
        const loadedVars = loadEnigmaAnswers();
        const inputElement = document.getElementById(varKey);
        const savedValue = loadedVars[varKey];
        
        if (inputElement && savedValue !== null) {
            inputElement.value = savedValue;
        } else if (inputElement) {
            inputElement.value = "";
        }
    };
    
    // ----------------------------------------------------------------------
    // --- FONCTIONS POUR √âNIGME (M) - (Bouton restaur√©) ---
    // ----------------------------------------------------------------------
    function resetValidation_M(varKey) {
        const inputElement = document.getElementById(varKey);
        const button = document.getElementById('validate-button-M');
        const validationMessage = document.getElementById('validation-message-M');
        
        resetButtonToDefault(button);
        validationMessage.textContent = "";

        const rawValue = inputElement.value.trim();
        if (rawValue === "") {
            let currentVars = loadEnigmaAnswers();
            currentVars[varKey] = null;
            saveEnigmaAnswers(currentVars);
        }
    }

    function handleValidation_M(varKey) {
        const inputElement = document.getElementById(varKey);
        const button = document.getElementById('validate-button-M');
        const validationMessage = document.getElementById('validation-message-M');
        
        const rawValue = inputElement.value.trim();
        const value = parseInt(rawValue);
        let currentVars = loadEnigmaAnswers();
        
        validationMessage.textContent = "";

        if (rawValue === "") {
            validationMessage.textContent = "‚ùå Veuillez entrer une valeur num√©rique.";
            currentVars[varKey] = null;
            saveEnigmaAnswers(currentVars);
            resetButtonToDefault(button);
            return;
        }
        
        if (isNaN(value) || value < 0 || value > 99 || rawValue.includes('.')) {
            validationMessage.textContent = "‚ùå Valeur incorrecte. Veuillez entrer un nombre entier positif entre 0 et 99.";
            currentVars[varKey] = null;
            saveEnigmaAnswers(currentVars);
            resetButtonToDefault(button);
            return;
        }

        if (varKey === 'M' && value % 2 === 0) {
            validationMessage.textContent = "‚ùå Ce nombre doit √™tre impair, v√©rifiez votre d√©compte !";
            currentVars[varKey] = null;
            saveEnigmaAnswers(currentVars);
            resetButtonToDefault(button);
            return;
        }

        currentVars[varKey] = value;
        saveEnigmaAnswers(currentVars);
        
        button.classList.remove('btn-default');
        button.classList.add('btn-validated');
        button.textContent = `R√©ponse ${varKey} = ${value} Sauvegard√©e !`;
    }

    function initEnigmaPage_M(varKey) {
        const loadedVars = loadEnigmaAnswers();
        const inputElement = document.getElementById(varKey);
        const button = document.getElementById('validate-button-M');
        const savedValue = loadedVars[varKey];
        
        if (inputElement) inputElement.value = "";
        
        if (button && savedValue !== null) {
            button.classList.remove('btn-default');
            button.classList.add('btn-validated');
            button.textContent = `R√©ponse ${varKey} = ${savedValue} Sauvegard√©e !`;
        } else if (button) {
            resetButtonToDefault(button);
        }
        
        if(inputElement) inputElement.oninput = () => resetValidation_M(varKey); 
    };
    
    // ----------------------------------------------------------------------
    // --- FONCTIONS POUR √âNIGME (N) - (Bouton restaur√©) ---
    // ----------------------------------------------------------------------
    function resetValidation_N(varKey) {
        const inputElement = document.getElementById(varKey);
        const button = document.getElementById('validate-button-N');
        const validationMessage = document.getElementById('validation-message-N');
        
        resetButtonToDefault(button);
        validationMessage.textContent = "";

        const rawValue = inputElement.value.trim();
        if (rawValue === "") {
            let currentVars = loadEnigmaAnswers();
            currentVars[varKey] = null;
            saveEnigmaAnswers(currentVars);
        }
    }

    function handleValidation_N(varKey) {
        const inputElement = document.getElementById(varKey);
        const button = document.getElementById('validate-button-N');
        const validationMessage = document.getElementById('validation-message-N');
        
        const rawValue = inputElement.value.trim();
        const value = parseInt(rawValue);
        let currentVars = loadEnigmaAnswers();
        
        validationMessage.textContent = "";
        
        if (rawValue === "" || isNaN(value) || value < 0 || value > 99 || rawValue.includes('.')) {
            validationMessage.textContent = "‚ùå Veuillez entrer un nombre entier positif.";
            currentVars[varKey] = null;
            saveEnigmaAnswers(currentVars);
            resetButtonToDefault(button);
            return;
        }

        // Note: La v√©rification de la *valeur correcte* (== 6) n'est faite que sur la page 15
        // Ici, on sauvegarde juste la valeur entr√©e.
        
        currentVars[varKey] = value;
        saveEnigmaAnswers(currentVars);
        
        button.classList.remove('btn-default');
        button.classList.add('btn-validated');
        button.textContent = `R√©ponse ${varKey} = ${value} Sauvegard√©e !`;
    }

    function initEnigmaPage_N(varKey) {
        const loadedVars = loadEnigmaAnswers();
        const inputElement = document.getElementById(varKey);
        const button = document.getElementById('validate-button-N');
        const savedValue = loadedVars[varKey];
        
        if (inputElement) inputElement.value = "";
        
        if (button && savedValue !== null) {
            button.classList.remove('btn-default');
            button.classList.add('btn-validated');
            button.textContent = `R√©ponse ${varKey} = ${savedValue} Sauvegard√©e !`;
        } else if (button) {
            resetButtonToDefault(button);
        }
        
        if(inputElement) inputElement.oninput = () => resetValidation_N(varKey); 
    };

    
    // ----------------------------------------------------------------------
    // --- FONCTIONS POUR √âNIGME FINALE (15) ---
    // ----------------------------------------------------------------------
    
    function validateConstraint(key, value) {
        if (value === null) return false;
        const numValue = parseInt(value);
        if (isNaN(numValue)) return false;

        switch (key) {
            case 'K': return [1, 2, 3].includes(numValue);
            case 'D': return numValue % 2 !== 0;
            case 'I': return numValue % 2 === 0;
            case 'M': return numValue % 2 !== 0;
            case 'L': return numValue >= 0 && numValue <= 9;
            default: return true;
        }
    }
    
    function handleVariableCorrection(varKey) {
        const inputElement = document.getElementById(`input-${varKey}`);
        let value = inputElement.value.trim();
        let numericValue = parseInt(value);
        let currentVars = loadEnigmaAnswers();
        
        if (value === "" || isNaN(numericValue) || numericValue < 0) {
            inputElement.value = ''; 
            currentVars[varKey] = null;
        } else {
            currentVars[varKey] = numericValue;
        }
        
        localStorage.setItem(ENIGMA_STORAGE_KEY, JSON.stringify(currentVars));
        displayCollectedVariables();
    }
    
    function displayCollectedVariables() {
        const vars = loadEnigmaAnswers();
        const listDiv = document.getElementById('variable-list');
        if (!listDiv) return 0;
        listDiv.innerHTML = ''; 

        const variableKeys = Object.keys(DEFAULT_ANSWERS);
        let allCorrect = true;

        variableKeys.forEach(key => {
            const value = vars[key];
            const correctValue = CORRECT_ANSWERS[key];
            const reminder = REMINDERS[key];
            const item = document.createElement('div');
            item.className = 'variable-item';
            
            let dotClass = 'dot-red';
            let inputValue = '';
            
            if (value !== null && !isNaN(value)) {
                inputValue = value;
                const constraintValid = validateConstraint(key, value);
                const valueCorrect = (value === correctValue);

                if (valueCorrect && constraintValid) {
                    dotClass = 'dot-green'; 
                } else {
                    allCorrect = false;
                }
            } else {
                allCorrect = false;
            }

            item.innerHTML = `
                <div class="variable-reminder">${reminder}</div>
                <div class="variable-input-row">
                    <span class="status-dot ${dotClass}"></span>
                    ${key} = 
                    <input type="number" id="input-${key}" value="${inputValue}" oninput="handleVariableCorrection('${key}')" placeholder="?">
                </div>
            `;
            listDiv.appendChild(item);
        });

        const checkButton = document.querySelector('#etape15 .final-check-zone button');
        if (checkButton) {
            if (allCorrect) {
                checkButton.style.backgroundColor = '#2ecc71';
                checkButton.style.boxShadow = '0 4px #27ae60';
            } else {
                checkButton.style.backgroundColor = '#d35400';
                checkButton.style.boxShadow = '0 4px #a04000';
            }
        }
        return allCorrect ? 1 : 0;
    }

    function checkFinalAnswer() {
        const messageDiv = document.getElementById('result-message');
        const finalLinkBox = document.getElementById('final-link-box');
        if (!messageDiv || !finalLinkBox) return;
        
        const allVariablesCorrect = displayCollectedVariables(); 

        finalLinkBox.style.display = 'none';

        if (allVariablesCorrect) {
            messageDiv.style.color = '#2ecc71';
            messageDiv.textContent = "‚úÖ F√âLICITATIONS ! Les 14 variables sont valid√©es. Le Tr√©sor est r√©v√©l√© ci-dessous.";
            finalLinkBox.style.display = 'block';
        } else {
            messageDiv.style.color = '#e74c3c';
            messageDiv.textContent = "‚ùå Attention ! Toutes les variables n'ont pas le statut VERT. Veuillez corriger la grille ci-dessus pour d√©bloquer le Tr√©sor.";
        }
    }

    function initFinalPage() {
        if (document.getElementById('etape15').style.display !== 'none') {
            const allCorrect = displayCollectedVariables();
            const messageDiv = document.getElementById('result-message');
            const finalLinkBox = document.getElementById('final-link-box');

            if (allCorrect) {
                if (finalLinkBox) finalLinkBox.style.display = 'block';
                if (messageDiv) {
                    messageDiv.style.color = '#2ecc71';
                    messageDiv.textContent = "‚úÖ Toutes les variables sont valid√©es.";
                }
            } else {
                if (finalLinkBox) finalLinkBox.style.display = 'none';
            }
        }
    }

    // ----------------------------------------------------------------------
    // --- INITIALISATION DE TOUTES LES PAGES (UNIFI√â) ---
    // ----------------------------------------------------------------------
    document.addEventListener("DOMContentLoaded", function() {
        // Init √©nigmes standard (A-J)
        ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J'].forEach(initStandardInput);
        
        // Init √©nigmes QCM (K)
        initQCMInput('K');
        
        // Init √©nigmes (L, M, N)
        initEnigmaPage_L('L');
        initEnigmaPage_M('M');
        initEnigmaPage_N('N');
        
        // Init Etape 15 (Grille)
        initFinalPage();
        
        // V√©rification du verrou au chargement de la page
        checkUnlockCondition();
    });

</script>

</body>
</html>


















